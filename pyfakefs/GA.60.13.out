Random testing using config=Config(swarmSwitch=None, verbose=False, reducePool=False, failedLogging=None, exploitBestHint=1, greedyStutter=False, internal=False, exploit=0.8, seed=None, generalize=False, useHints=False, localize=False, total=False, speed='FAST', probs=None, normalize=False, verboseExploit=False, highLowSwarm=None, replayable=False, essentials=False, noCoverageExploit=False, quickTests=False, relax=False, enumerateEnabled=False, uniqueValuesAnalysis=False, swarm=False, noReassign=False, html=None, fastQuickAnalysis=False, progress=False, swarmLength=None, noSwarmDependencies=False, profile=False, LOCBaseline=0.2, noEnumerateEnabled=False, full=True, multiple=True, timedProgress=30, silentFail=True, stopWhenStatements=None, swarmP=0.5, stopWhenBranches=None, noAlphaConvert=False, coverFile='coverage.out', readQuick=False, verboseActions=False, running=False, computeFeatureStats=False, compareFails=False, swarmProbs=None, output='failure.4199.test', genDepth=None, Pcrossover=0.2, quickAnalysis=False, keepLast=False, exploitCeiling=0.1, logging=None, LOCProbs=False, noCheck=False, maxTests=-1, noExceptionMatch=False, Pmutate=0.8, depth=100, showActions=False, throughput=False, noCover=False, timeout=60, stutter=None, uncaught=False, markov=None, startExploit=0)
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x1079beb00>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28999, in act575
    result = self.p_file[0].readlines()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
Original test has 398 steps

SAVING TEST AS failure.4199.test.0
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
os0.rename(path4,path1)                                                # STEP 255
path2 += "/" + component3                                              # STEP 256
str4 += 'o'                                                            # STEP 257
os0.link(path1,path3)                                                  # STEP 258
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 259
os0.remove(path3)                                                      # STEP 260
str0 += 'g'                                                            # STEP 261
os0.symlink(path4,path2)                                               # STEP 262
str4 += 'g'                                                            # STEP 263
path1 += "/" + component4                                              # STEP 264
str4 += 't'                                                            # STEP 265
str3 += 'j'                                                            # STEP 266
str3 += 'p'                                                            # STEP 267
str1 += 'g'                                                            # STEP 268
str1 += 'r'                                                            # STEP 269
str1 += 'e'                                                            # STEP 270
str1 += 'o'                                                            # STEP 271
str4 += 'v'                                                            # STEP 272
result = os0.read(fd0,bytes2)                                          # STEP 273
result = os0.readlink(path2)                                           # STEP 274
stat2 = os0.fstat(fd0)                                                 # STEP 275
os0.rmdir(path2)                                                       # STEP 276
str4 += 'n'                                                            # STEP 277
stat4 = os0.lstat(path4)                                               # STEP 278
str4 += 'r'                                                            # STEP 279
str1 += 'u'                                                            # STEP 280
result = sorted(os0.listdir(path2))                                    # STEP 281
str1 += 'l'                                                            # STEP 282
result = os0.path.exists(path1)                                        # STEP 283
component4 = "e"                                                       # STEP 284
str1 += 'q'                                                            # STEP 285
os0.close(fd0)                                                         # STEP 286
os0.symlink(path4,path1)                                               # STEP 287
str0 += 'l'                                                            # STEP 288
file0 = opener0(path3,'r')                                             # STEP 289
str1 += 'j'                                                            # STEP 290
os0.remove(path4)                                                      # STEP 291
file0 = opener0(path3)                                                 # STEP 292
str3 += 'f'                                                            # STEP 293
os0.link(path4,path4)                                                  # STEP 294
component3 = "alpha"                                                   # STEP 295
os0.rmdir(path1)                                                       # STEP 296
result = sorted(os0.listdir(path3))                                    # STEP 297
str0 += 'c'                                                            # STEP 298
os0.symlink(path1,path2)                                               # STEP 299
result = stat2.st_nlink                                                # STEP 300
path1 += "/" + component0                                              # STEP 301
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 302
str0 += 's'                                                            # STEP 303
result = os0.path.dirname(path4)                                       # STEP 304
file0 = opener0(path3,'w')                                             # STEP 305
str4 += 'p'                                                            # STEP 306
component0 = "d"                                                       # STEP 307
result = os0.readlink(path2)                                           # STEP 308
result = os0.read(fd0,bytes4)                                          # STEP 309
str1 += 'w'                                                            # STEP 310
result = os0.path.exists(path3)                                        # STEP 311
path3 += "/" + component4                                              # STEP 312
os0.write(fd0,str0)                                                    # STEP 313
os0.write(fd0,str3)                                                    # STEP 314
component4 = "delta"                                                   # STEP 315
result = os0.readlink(path2)                                           # STEP 316
str3 += 'f'                                                            # STEP 317
str0 = ""                                                              # STEP 318
os0.path.getsize(path2)                                                # STEP 319
str0 += 'q'                                                            # STEP 320
stat2 = os0.fstat(fd0)                                                 # STEP 321
bytes3 = 0                                                             # STEP 322
os0.makedirs(path4)                                                    # STEP 323
result = os0.read(fd0,bytes4)                                          # STEP 324
str3 += 'h'                                                            # STEP 325
result = os0.path.isabs(path1)                                         # STEP 326
result = os0.read(fd0,bytes2)                                          # STEP 327
str1 += 'q'                                                            # STEP 328
file0 = opener0(path2,'r')                                             # STEP 329
str1 += 'l'                                                            # STEP 330
result = os0.read(fd0,bytes2)                                          # STEP 331
path2 += "/" + component4                                              # STEP 332
str3 += 'f'                                                            # STEP 333
str3 += 'b'                                                            # STEP 334
str1 += 's'                                                            # STEP 335
component4 = "alpha"                                                   # STEP 336
str1 += 'p'                                                            # STEP 337
result = os0.path.lexists(path1)                                       # STEP 338
str3 += 'x'                                                            # STEP 339
result = stat3.st_nlink                                                # STEP 340
file0 = opener0(path1,'a')                                             # STEP 341
str0 += 'g'                                                            # STEP 342
path2 += "/" + component3                                              # STEP 343
str1 += 'h'                                                            # STEP 344
component3 = "beta"                                                    # STEP 345
path2 = "/Volumes/ramdisk/test"                                        # STEP 346
path2 += "/" + component0                                              # STEP 347
str0 += 'h'                                                            # STEP 348
component0 = "c"                                                       # STEP 349
result = os0.path.dirname(path4)                                       # STEP 350
bytes2 = 0                                                             # STEP 351
stat4 = os0.lstat(path2)                                               # STEP 352
os0.rmdir(path3)                                                       # STEP 353
result = stat2.st_size                                                 # STEP 354
result = stat3.st_size                                                 # STEP 355
str4 += 'h'                                                            # STEP 356
str3 += 'a'                                                            # STEP 357
stat3 = os0.lstat(path2)                                               # STEP 358
os0.link(path3,path4)                                                  # STEP 359
str1 += 'g'                                                            # STEP 360
result = os0.path.isdir(path4)                                         # STEP 361
result = os0.path.isdir(path1)                                         # STEP 362
os0.rmdir(path4)                                                       # STEP 363
result = sorted(os0.listdir(path4))                                    # STEP 364
result = os0.read(fd0,bytes2)                                          # STEP 365
os0.mkdir(path2)                                                       # STEP 366
os0.remove(path4)                                                      # STEP 367
str4 += 'd'                                                            # STEP 368
result = os0.readlink(path4)                                           # STEP 369
bytes1 += 1                                                            # STEP 370
result = os0.path.islink(path3)                                        # STEP 371
file0.truncate()                                                       # STEP 372
str3 += 'y'                                                            # STEP 373
result = os0.readlink(path2)                                           # STEP 374
file0.seek(bytes0)                                                     # STEP 375
stat2 = os0.stat(path2)                                                # STEP 376
os0.write(fd0,str3)                                                    # STEP 377
result = os0.path.abspath(path1)                                       # STEP 378
os0.symlink(path4,path1)                                               # STEP 379
str4 += 'o'                                                            # STEP 380
os0.rename(path1,path3)                                                # STEP 381
os0.link(path4,path2)                                                  # STEP 382
str3 += 'j'                                                            # STEP 383
path1 = "/Volumes/ramdisk/test"                                        # STEP 384
str4 += 'l'                                                            # STEP 385
os0.write(fd0,str4)                                                    # STEP 386
path4 = "/Volumes/ramdisk/test"                                        # STEP 387
file0.seek(bytes4)                                                     # STEP 388
result = stat4.st_nlink                                                # STEP 389
os0.remove(path4)                                                      # STEP 390
str1 = ""                                                              # STEP 391
result = os0.path.exists(path2)                                        # STEP 392
result = os0.read(fd0,bytes4)                                          # STEP 393
os0.rename(path3,path4)                                                # STEP 394
str0 += 'q'                                                            # STEP 395
result = os0.path.exists(path3)                                        # STEP 396
result = file0.readlines()                                             # STEP 397
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x109270200>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28999, in act575
    result = self.p_file[0].readlines()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE IS NEW, STORING; NOW 1 DISTINCT FAILURES
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x1091d07a0>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28588, in act568
    result = self.p_file[0].read(self.p_bytes[4])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
Original test has 370 steps

SAVING TEST AS failure.4199.test.1
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
path4 += "/" + component1                                              # STEP 363
component1 = "e"                                                       # STEP 364
result = file0.readline()                                              # STEP 365
result = os0.read(fd0,bytes1)                                          # STEP 366
file0.write(str1)                                                      # STEP 367
os0.link(path4,path3)                                                  # STEP 368
result = file0.read(bytes4)                                            # STEP 369
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x1059bb560>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28588, in act568
    result = self.p_file[0].read(self.p_bytes[4])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE IS NEW, STORING; NOW 2 DISTINCT FAILURES
TEST #105 STEP #0 (0:00:30.831191) Fri Jul 21 23:31:23 2017 [ 876 stmts 1142 branches ] 10299 TOTAL ACTIONS (334.044833319/s)
FAILURE DURING MUTATION
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x10585f710>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38058, in replay
    act()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28701, in act570
    result = self.p_file[0].readline(self.p_bytes[0])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
Original test has 335 steps

SAVING TEST AS failure.4199.test.2
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
os0.rename(path4,path1)                                                # STEP 255
path2 += "/" + component3                                              # STEP 256
str4 += 'o'                                                            # STEP 257
os0.link(path1,path3)                                                  # STEP 258
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 259
os0.remove(path3)                                                      # STEP 260
str0 += 'g'                                                            # STEP 261
os0.symlink(path4,path2)                                               # STEP 262
str4 += 'g'                                                            # STEP 263
path1 += "/" + component4                                              # STEP 264
str4 += 't'                                                            # STEP 265
str3 += 'j'                                                            # STEP 266
str3 += 'p'                                                            # STEP 267
str1 += 'g'                                                            # STEP 268
os0.remove(path3)                                                      # STEP 269
str0 += 'b'                                                            # STEP 270
os0.symlink(path3,path2)                                               # STEP 271
path4 = "/Volumes/ramdisk/test"                                        # STEP 272
result = os0.path.dirname(path4)                                       # STEP 273
os0.symlink(path3,path3)                                               # STEP 274
os0.link(path2,path3)                                                  # STEP 275
str1 += 'o'                                                            # STEP 276
str0 += 'o'                                                            # STEP 277
result = os0.path.lexists(path3)                                       # STEP 278
os0.remove(path4)                                                      # STEP 279
str1 += 'y'                                                            # STEP 280
os0.symlink(path1,path3)                                               # STEP 281
result = os0.path.isabs(path3)                                         # STEP 282
os0.mkdir(path4)                                                       # STEP 283
stat3 = os0.fstat(fd0)                                                 # STEP 284
file0 = opener0(path3)                                                 # STEP 285
str3 += 't'                                                            # STEP 286
os0.rename(path1,path4)                                                # STEP 287
os0.link(path1,path2)                                                  # STEP 288
stat4 = os0.fstat(fd0)                                                 # STEP 289
str0 += 'w'                                                            # STEP 290
path4 += "/" + component1                                              # STEP 291
str1 += 'd'                                                            # STEP 292
bytes1 = 0                                                             # STEP 293
stat2 = os0.stat(path1)                                                # STEP 294
str0 += 'z'                                                            # STEP 295
component4 = "delta"                                                   # STEP 296
str3 += 't'                                                            # STEP 297
os0.link(path2,path2)                                                  # STEP 298
file0 = opener0(path4,'w')                                             # STEP 299
os0.symlink(path2,path1)                                               # STEP 300
os0.link(path4,path1)                                                  # STEP 301
str1 += 'e'                                                            # STEP 302
str1 += 'h'                                                            # STEP 303
str3 += 'o'                                                            # STEP 304
str1 += 'l'                                                            # STEP 305
path3 += "/" + component4                                              # STEP 306
result = os0.path.dirname(path1)                                       # STEP 307
os0.symlink(path2,path2)                                               # STEP 308
component4 = "epsilon"                                                 # STEP 309
str3 += " "                                                            # STEP 310
path2 += "/" + component1                                              # STEP 311
os0.write(fd0,str3)                                                    # STEP 312
os0.rename(path4,path3)                                                # STEP 313
component1 = "f"                                                       # STEP 314
path1 += "/" + component0                                              # STEP 315
os0.link(path1,path2)                                                  # STEP 316
result = os0.path.exists(path3)                                        # STEP 317
os0.link(path2,path1)                                                  # STEP 318
str4 = ""                                                              # STEP 319
component0 = "omega"                                                   # STEP 320
result = os0.path.abspath(path4)                                       # STEP 321
result = os0.path.exists(path2)                                        # STEP 322
str3 += 'z'                                                            # STEP 323
os0.symlink(path4,path4)                                               # STEP 324
str4 += 'v'                                                            # STEP 325
os0.symlink(path2,path2)                                               # STEP 326
bytes0 = 0                                                             # STEP 327
os0.write(fd0,str0)                                                    # STEP 328
str1 += 'e'                                                            # STEP 329
os0.symlink(path3,path4)                                               # STEP 330
str1 += 'a'                                                            # STEP 331
str0 += 'j'                                                            # STEP 332
str4 += 'e'                                                            # STEP 333
result = file0.readline(bytes0)                                        # STEP 334
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x1045ff758>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28701, in act570
    result = self.p_file[0].readline(self.p_bytes[0])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE IS NEW, STORING; NOW 3 DISTINCT FAILURES
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x105820f38>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28701, in act570
    result = self.p_file[0].readline(self.p_bytes[0])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
Original test has 396 steps

SAVING TEST AS failure.4199.test.3
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 'l'                                                            # STEP 196
str1 += 'i'                                                            # STEP 197
str0 += 'p'                                                            # STEP 198
str1 += 'z'                                                            # STEP 199
str3 += 'n'                                                            # STEP 200
result = os0.path.dirname(path1)                                       # STEP 201
str0 += 's'                                                            # STEP 202
path2 += "/" + component4                                              # STEP 203
str1 += 'o'                                                            # STEP 204
os0.removedirs(path3)                                                  # STEP 205
os0.symlink(path1,path3)                                               # STEP 206
str3 += 'w'                                                            # STEP 207
component4 = "epsilon"                                                 # STEP 208
os0.symlink(path3,path1)                                               # STEP 209
str0 += 'z'                                                            # STEP 210
bytes4 += 1                                                            # STEP 211
str0 += 'h'                                                            # STEP 212
stat4 = os0.lstat(path2)                                               # STEP 213
result = os0.readlink(path3)                                           # STEP 214
path4 = "/Volumes/ramdisk/test"                                        # STEP 215
file0 = opener0(path2)                                                 # STEP 216
path4 += "/" + component3                                              # STEP 217
str1 += 'p'                                                            # STEP 218
os0.mkdir(path3)                                                       # STEP 219
str1 += 'x'                                                            # STEP 220
path2 += "/" + component2                                              # STEP 221
result = stat2.st_size                                                 # STEP 222
str3 += 'g'                                                            # STEP 223
bytes1 += 1                                                            # STEP 224
str3 += 'q'                                                            # STEP 225
component3 = "gamma"                                                   # STEP 226
result = os0.path.isdir(path4)                                         # STEP 227
str4 = ""                                                              # STEP 228
bytes2 = 0                                                             # STEP 229
result = os0.path.dirname(path2)                                       # STEP 230
result = os0.path.lexists(path1)                                       # STEP 231
result = os0.path.exists(path1)                                        # STEP 232
result = os0.path.isdir(path3)                                         # STEP 233
str0 += 'u'                                                            # STEP 234
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 235
str1 += 'e'                                                            # STEP 236
component2 = "gamma"                                                   # STEP 237
str4 += 'e'                                                            # STEP 238
str4 += 'n'                                                            # STEP 239
os0.link(path2,path3)                                                  # STEP 240
result = os0.readlink(path1)                                           # STEP 241
os0.removedirs(path1)                                                  # STEP 242
result = os0.path.isabs(path3)                                         # STEP 243
result = stat3.st_nlink                                                # STEP 244
result = os0.readlink(path4)                                           # STEP 245
str3 += 'e'                                                            # STEP 246
result = os0.path.abspath(path2)                                       # STEP 247
result = sorted(os0.listdir(path2))                                    # STEP 248
str4 += 'c'                                                            # STEP 249
os0.close(fd0)                                                         # STEP 250
os0.link(path4,path3)                                                  # STEP 251
str4 += 'j'                                                            # STEP 252
os0.link(path4,path4)                                                  # STEP 253
os0.rename(path4,path1)                                                # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
str0 += 'm'                                                            # STEP 363
result = file0.readline(bytes0)                                        # STEP 364
result = os0.path.dirname(path2)                                       # STEP 365
str3 += 'w'                                                            # STEP 366
os0.makedirs(path1)                                                    # STEP 367
result = os0.path.isabs(path2)                                         # STEP 368
result = stat4.st_nlink                                                # STEP 369
str3 += 'w'                                                            # STEP 370
os0.remove(path4)                                                      # STEP 371
str3 += 'q'                                                            # STEP 372
str4 += 'v'                                                            # STEP 373
str4 += 'w'                                                            # STEP 374
str1 += 'j'                                                            # STEP 375
file0.write(str1)                                                      # STEP 376
str3 += 'r'                                                            # STEP 377
str3 += 'm'                                                            # STEP 378
os0.removedirs(path1)                                                  # STEP 379
stat4 = os0.fstat(fd0)                                                 # STEP 380
result = os0.read(fd0,bytes0)                                          # STEP 381
os0.rename(path4,path1)                                                # STEP 382
result = stat0.st_nlink                                                # STEP 383
result = os0.read(fd0,bytes3)                                          # STEP 384
result = os0.path.isdir(path4)                                         # STEP 385
result = os0.path.isfile(path2)                                        # STEP 386
stat0 = os0.lstat(path4)                                               # STEP 387
os0.rmdir(path1)                                                       # STEP 388
os0.removedirs(path2)                                                  # STEP 389
str4 += 'f'                                                            # STEP 390
str0 += 'x'                                                            # STEP 391
str0 += 'x'                                                            # STEP 392
stat2 = os0.lstat(path4)                                               # STEP 393
str3 += 'v'                                                            # STEP 394
result = file0.readline(bytes0)                                        # STEP 395
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x103123b48>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28701, in act570
    result = self.p_file[0].readline(self.p_bytes[0])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE IS NEW, STORING; NOW 4 DISTINCT FAILURES
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x106d66dd0>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28999, in act575
    result = self.p_file[0].readlines()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
Original test has 411 steps

SAVING TEST AS failure.4199.test.4
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str4 += 'n'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 'l'                                                            # STEP 196
str1 += 'i'                                                            # STEP 197
str0 += 'p'                                                            # STEP 198
str1 += 'z'                                                            # STEP 199
str3 += 'n'                                                            # STEP 200
result = os0.path.dirname(path1)                                       # STEP 201
str0 += 's'                                                            # STEP 202
path2 += "/" + component4                                              # STEP 203
str1 += 'o'                                                            # STEP 204
os0.removedirs(path3)                                                  # STEP 205
os0.symlink(path1,path3)                                               # STEP 206
str3 += 'w'                                                            # STEP 207
component4 = "epsilon"                                                 # STEP 208
os0.symlink(path3,path1)                                               # STEP 209
str0 += 'z'                                                            # STEP 210
bytes4 += 1                                                            # STEP 211
str0 += 'h'                                                            # STEP 212
stat4 = os0.lstat(path2)                                               # STEP 213
result = os0.readlink(path3)                                           # STEP 214
path4 = "/Volumes/ramdisk/test"                                        # STEP 215
file0 = opener0(path2)                                                 # STEP 216
path4 += "/" + component3                                              # STEP 217
str1 += 'p'                                                            # STEP 218
os0.mkdir(path3)                                                       # STEP 219
str1 += 'x'                                                            # STEP 220
path2 += "/" + component2                                              # STEP 221
result = stat2.st_size                                                 # STEP 222
str3 += 'g'                                                            # STEP 223
bytes1 += 1                                                            # STEP 224
str3 += 'q'                                                            # STEP 225
component3 = "gamma"                                                   # STEP 226
result = os0.path.isdir(path4)                                         # STEP 227
str4 = ""                                                              # STEP 228
bytes2 = 0                                                             # STEP 229
result = os0.path.dirname(path2)                                       # STEP 230
result = os0.path.lexists(path1)                                       # STEP 231
result = os0.path.exists(path1)                                        # STEP 232
result = os0.path.isdir(path3)                                         # STEP 233
str0 += 'u'                                                            # STEP 234
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 235
str1 += 'e'                                                            # STEP 236
component2 = "gamma"                                                   # STEP 237
str4 += 'e'                                                            # STEP 238
str4 += 'n'                                                            # STEP 239
os0.link(path2,path3)                                                  # STEP 240
result = os0.readlink(path1)                                           # STEP 241
os0.removedirs(path1)                                                  # STEP 242
result = os0.path.isabs(path3)                                         # STEP 243
result = stat3.st_nlink                                                # STEP 244
result = os0.readlink(path4)                                           # STEP 245
str3 += 'e'                                                            # STEP 246
result = os0.path.abspath(path2)                                       # STEP 247
result = sorted(os0.listdir(path2))                                    # STEP 248
str4 += 'c'                                                            # STEP 249
os0.close(fd0)                                                         # STEP 250
os0.link(path4,path3)                                                  # STEP 251
str4 += 'j'                                                            # STEP 252
os0.link(path4,path4)                                                  # STEP 253
os0.rename(path4,path1)                                                # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
str0 += 'm'                                                            # STEP 363
result = file0.readline(bytes0)                                        # STEP 364
result = os0.path.dirname(path2)                                       # STEP 365
str3 += 'w'                                                            # STEP 366
os0.makedirs(path1)                                                    # STEP 367
result = os0.path.isabs(path2)                                         # STEP 368
result = stat4.st_nlink                                                # STEP 369
str3 += 'w'                                                            # STEP 370
os0.remove(path4)                                                      # STEP 371
str3 += 'q'                                                            # STEP 372
str4 += 'v'                                                            # STEP 373
str4 += 'w'                                                            # STEP 374
str1 += 'j'                                                            # STEP 375
file0.write(str1)                                                      # STEP 376
str3 += 'r'                                                            # STEP 377
str3 += 'm'                                                            # STEP 378
os0.removedirs(path1)                                                  # STEP 379
stat4 = os0.fstat(fd0)                                                 # STEP 380
result = os0.read(fd0,bytes0)                                          # STEP 381
os0.rename(path4,path1)                                                # STEP 382
str1 += 'y'                                                            # STEP 383
str1 += 'l'                                                            # STEP 384
str3 += 'z'                                                            # STEP 385
os0.link(path1,path2)                                                  # STEP 386
str4 += 'c'                                                            # STEP 387
str3 += 'f'                                                            # STEP 388
bytes4 = 0                                                             # STEP 389
str0 += 'l'                                                            # STEP 390
str1 += 'n'                                                            # STEP 391
result = stat0.st_nlink                                                # STEP 392
str1 += 'a'                                                            # STEP 393
result = os0.path.abspath(path1)                                       # STEP 394
file0.write(str3)                                                      # STEP 395
result = sorted(os0.listdir(path4))                                    # STEP 396
os0.symlink(path4,path1)                                               # STEP 397
str4 += 'y'                                                            # STEP 398
os0.rmdir(path3)                                                       # STEP 399
str3 += 'x'                                                            # STEP 400
os0.write(fd0,str3)                                                    # STEP 401
result = os0.path.abspath(path3)                                       # STEP 402
result = os0.path.exists(path2)                                        # STEP 403
str1 += 's'                                                            # STEP 404
file0.seek(bytes3)                                                     # STEP 405
path2 += "/" + component1                                              # STEP 406
stat2 = os0.fstat(fd0)                                                 # STEP 407
str0 += 'm'                                                            # STEP 408
component1 = "beta"                                                    # STEP 409
result = file0.readlines()                                             # STEP 410
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x106d9dfc8>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28999, in act575
    result = self.p_file[0].readlines()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE IS NEW, STORING; NOW 5 DISTINCT FAILURES
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x10a5f8710>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28646, in act569
    result = self.p_file[0].readline()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
Original test has 412 steps

SAVING TEST AS failure.4199.test.5
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
os0.rename(path4,path1)                                                # STEP 255
path2 += "/" + component3                                              # STEP 256
str4 += 'o'                                                            # STEP 257
os0.link(path1,path3)                                                  # STEP 258
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 259
os0.remove(path3)                                                      # STEP 260
str0 += 'g'                                                            # STEP 261
os0.symlink(path4,path2)                                               # STEP 262
str4 += 'g'                                                            # STEP 263
path1 += "/" + component4                                              # STEP 264
str4 += 't'                                                            # STEP 265
str3 += 'j'                                                            # STEP 266
str3 += 'p'                                                            # STEP 267
str1 += 'g'                                                            # STEP 268
str1 += 'r'                                                            # STEP 269
str1 += 'e'                                                            # STEP 270
str1 += 'o'                                                            # STEP 271
str4 += 'v'                                                            # STEP 272
result = os0.read(fd0,bytes2)                                          # STEP 273
result = os0.readlink(path2)                                           # STEP 274
stat2 = os0.fstat(fd0)                                                 # STEP 275
os0.rmdir(path2)                                                       # STEP 276
str4 += 'n'                                                            # STEP 277
stat4 = os0.lstat(path4)                                               # STEP 278
str4 += 'r'                                                            # STEP 279
str1 += 'u'                                                            # STEP 280
result = sorted(os0.listdir(path2))                                    # STEP 281
str1 += 'l'                                                            # STEP 282
result = os0.path.exists(path1)                                        # STEP 283
component4 = "e"                                                       # STEP 284
str1 += 'q'                                                            # STEP 285
os0.close(fd0)                                                         # STEP 286
os0.symlink(path4,path1)                                               # STEP 287
str0 += 'l'                                                            # STEP 288
file0 = opener0(path3,'r')                                             # STEP 289
str1 += 'j'                                                            # STEP 290
os0.remove(path4)                                                      # STEP 291
file0 = opener0(path3)                                                 # STEP 292
str3 += 'f'                                                            # STEP 293
os0.link(path4,path4)                                                  # STEP 294
component3 = "alpha"                                                   # STEP 295
os0.rmdir(path1)                                                       # STEP 296
result = sorted(os0.listdir(path3))                                    # STEP 297
str0 += 'c'                                                            # STEP 298
os0.symlink(path1,path2)                                               # STEP 299
result = stat2.st_nlink                                                # STEP 300
path1 += "/" + component0                                              # STEP 301
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 302
str0 += 's'                                                            # STEP 303
result = os0.path.dirname(path4)                                       # STEP 304
file0 = opener0(path3,'w')                                             # STEP 305
str4 += 'p'                                                            # STEP 306
component0 = "d"                                                       # STEP 307
result = os0.readlink(path2)                                           # STEP 308
result = os0.read(fd0,bytes4)                                          # STEP 309
str1 += 'w'                                                            # STEP 310
result = os0.path.exists(path3)                                        # STEP 311
path3 += "/" + component4                                              # STEP 312
os0.write(fd0,str0)                                                    # STEP 313
os0.write(fd0,str3)                                                    # STEP 314
component4 = "delta"                                                   # STEP 315
result = os0.readlink(path2)                                           # STEP 316
str3 += 'f'                                                            # STEP 317
str0 = ""                                                              # STEP 318
os0.path.getsize(path2)                                                # STEP 319
str0 += 'q'                                                            # STEP 320
stat2 = os0.fstat(fd0)                                                 # STEP 321
bytes3 = 0                                                             # STEP 322
os0.makedirs(path4)                                                    # STEP 323
result = os0.read(fd0,bytes4)                                          # STEP 324
str3 += 'h'                                                            # STEP 325
result = os0.path.isabs(path1)                                         # STEP 326
result = os0.read(fd0,bytes2)                                          # STEP 327
str1 += 'q'                                                            # STEP 328
file0 = opener0(path2,'r')                                             # STEP 329
str1 += 'l'                                                            # STEP 330
result = os0.read(fd0,bytes2)                                          # STEP 331
path2 += "/" + component4                                              # STEP 332
str3 += 'f'                                                            # STEP 333
str3 += 'b'                                                            # STEP 334
str1 += 's'                                                            # STEP 335
component4 = "alpha"                                                   # STEP 336
str1 += 'p'                                                            # STEP 337
result = os0.path.lexists(path1)                                       # STEP 338
str3 += 'x'                                                            # STEP 339
result = stat3.st_nlink                                                # STEP 340
file0 = opener0(path1,'a')                                             # STEP 341
str0 += 'g'                                                            # STEP 342
path2 += "/" + component3                                              # STEP 343
str1 += 'h'                                                            # STEP 344
component3 = "beta"                                                    # STEP 345
path2 = "/Volumes/ramdisk/test"                                        # STEP 346
path2 += "/" + component0                                              # STEP 347
str0 += 'h'                                                            # STEP 348
component0 = "c"                                                       # STEP 349
result = os0.path.dirname(path4)                                       # STEP 350
bytes2 = 0                                                             # STEP 351
stat4 = os0.lstat(path2)                                               # STEP 352
os0.rmdir(path3)                                                       # STEP 353
result = stat2.st_size                                                 # STEP 354
result = stat3.st_size                                                 # STEP 355
str4 += 'h'                                                            # STEP 356
str3 += 'a'                                                            # STEP 357
stat3 = os0.lstat(path2)                                               # STEP 358
os0.link(path3,path4)                                                  # STEP 359
str1 += 'g'                                                            # STEP 360
result = os0.path.isdir(path4)                                         # STEP 361
result = os0.path.isdir(path1)                                         # STEP 362
os0.rmdir(path4)                                                       # STEP 363
str1 += 'o'                                                            # STEP 364
str1 += 'c'                                                            # STEP 365
path3 += "/" + component3                                              # STEP 366
result = os0.read(fd0,bytes1)                                          # STEP 367
str0 += 'k'                                                            # STEP 368
os0.link(path1,path4)                                                  # STEP 369
os0.symlink(path1,path3)                                               # STEP 370
path2 += "/" + component1                                              # STEP 371
stat2 = os0.lstat(path3)                                               # STEP 372
str1 += 's'                                                            # STEP 373
result = os0.path.lexists(path1)                                       # STEP 374
str1 += 'j'                                                            # STEP 375
component3 = "c"                                                       # STEP 376
result = os0.path.abspath(path4)                                       # STEP 377
os0.mkdir(path1)                                                       # STEP 378
os0.rename(path2,path1)                                                # STEP 379
str0 += 't'                                                            # STEP 380
path3 += "/" + component3                                              # STEP 381
str4 += 'a'                                                            # STEP 382
path1 += "/" + component0                                              # STEP 383
component0 = "lambda"                                                  # STEP 384
str0 += 'l'                                                            # STEP 385
os0.symlink(path1,path3)                                               # STEP 386
os0.mkdir(path3)                                                       # STEP 387
str2 = ""                                                              # STEP 388
os0.link(path3,path3)                                                  # STEP 389
str4 += 'x'                                                            # STEP 390
component3 = "h"                                                       # STEP 391
str0 += 'k'                                                            # STEP 392
result = sorted(os0.listdir(path1))                                    # STEP 393
os0.link(path2,path3)                                                  # STEP 394
os0.remove(path2)                                                      # STEP 395
path3 += "/" + component4                                              # STEP 396
str4 += 'x'                                                            # STEP 397
str3 += 'k'                                                            # STEP 398
str1 += 'p'                                                            # STEP 399
result = os0.path.isfile(path1)                                        # STEP 400
str0 += 'j'                                                            # STEP 401
file0.next()                                                           # STEP 402
os0.link(path1,path4)                                                  # STEP 403
path1 = "/Volumes/ramdisk/test"                                        # STEP 404
os0.link(path3,path4)                                                  # STEP 405
component4 = "beta"                                                    # STEP 406
path3 += "/" + component1                                              # STEP 407
str3 += 'n'                                                            # STEP 408
bytes4 = 0                                                             # STEP 409
str4 += 'q'                                                            # STEP 410
result = file0.readline()                                              # STEP 411
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x105904cb0>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28646, in act569
    result = self.p_file[0].readline()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE IS NEW, STORING; NOW 6 DISTINCT FAILURES
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.AssertionError'>, AssertionError(' (40) == (0) ',), <traceback object at 0x106e85680>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 21991, in act461
    try: assert result == result_REF, " (%s) == (%s) " % (result, result_REF)
Original test has 385 steps

SAVING TEST AS failure.4199.test.6
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 'l'                                                            # STEP 196
str1 += 'i'                                                            # STEP 197
str0 += 'p'                                                            # STEP 198
str1 += 'z'                                                            # STEP 199
str3 += 'n'                                                            # STEP 200
result = os0.path.dirname(path1)                                       # STEP 201
str0 += 's'                                                            # STEP 202
path2 += "/" + component4                                              # STEP 203
str1 += 'o'                                                            # STEP 204
os0.removedirs(path3)                                                  # STEP 205
os0.symlink(path1,path3)                                               # STEP 206
str3 += 'w'                                                            # STEP 207
component4 = "epsilon"                                                 # STEP 208
os0.symlink(path3,path1)                                               # STEP 209
str0 += 'z'                                                            # STEP 210
bytes4 += 1                                                            # STEP 211
str0 += 'h'                                                            # STEP 212
stat4 = os0.lstat(path2)                                               # STEP 213
result = os0.readlink(path3)                                           # STEP 214
path4 = "/Volumes/ramdisk/test"                                        # STEP 215
file0 = opener0(path2)                                                 # STEP 216
path4 += "/" + component3                                              # STEP 217
str1 += 'p'                                                            # STEP 218
os0.mkdir(path3)                                                       # STEP 219
str1 += 'x'                                                            # STEP 220
path2 += "/" + component2                                              # STEP 221
result = stat2.st_size                                                 # STEP 222
str3 += 'g'                                                            # STEP 223
bytes1 += 1                                                            # STEP 224
str3 += 'q'                                                            # STEP 225
component3 = "gamma"                                                   # STEP 226
result = os0.path.isdir(path4)                                         # STEP 227
str4 = ""                                                              # STEP 228
bytes2 = 0                                                             # STEP 229
result = os0.path.dirname(path2)                                       # STEP 230
result = os0.path.lexists(path1)                                       # STEP 231
result = os0.path.exists(path1)                                        # STEP 232
result = os0.path.isdir(path3)                                         # STEP 233
str0 += 'u'                                                            # STEP 234
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 235
str1 += 'e'                                                            # STEP 236
component2 = "gamma"                                                   # STEP 237
str4 += 'e'                                                            # STEP 238
str4 += 'n'                                                            # STEP 239
os0.link(path2,path3)                                                  # STEP 240
result = os0.readlink(path1)                                           # STEP 241
os0.removedirs(path1)                                                  # STEP 242
result = os0.path.isabs(path3)                                         # STEP 243
result = stat3.st_nlink                                                # STEP 244
result = os0.readlink(path4)                                           # STEP 245
str3 += 'e'                                                            # STEP 246
result = os0.path.abspath(path2)                                       # STEP 247
result = sorted(os0.listdir(path2))                                    # STEP 248
str4 += 'c'                                                            # STEP 249
os0.close(fd0)                                                         # STEP 250
os0.link(path4,path3)                                                  # STEP 251
str4 += 'j'                                                            # STEP 252
os0.link(path4,path4)                                                  # STEP 253
os0.rename(path4,path1)                                                # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
str0 += 'm'                                                            # STEP 363
result = file0.readline(bytes0)                                        # STEP 364
result = os0.path.dirname(path2)                                       # STEP 365
str3 += 'w'                                                            # STEP 366
os0.makedirs(path1)                                                    # STEP 367
result = os0.path.isabs(path2)                                         # STEP 368
result = stat4.st_nlink                                                # STEP 369
str3 += 'w'                                                            # STEP 370
os0.remove(path4)                                                      # STEP 371
str3 += 'q'                                                            # STEP 372
str4 += 'v'                                                            # STEP 373
str4 += 'w'                                                            # STEP 374
str1 += 'j'                                                            # STEP 375
file0.write(str1)                                                      # STEP 376
str3 += 'r'                                                            # STEP 377
str3 += 'm'                                                            # STEP 378
os0.removedirs(path1)                                                  # STEP 379
stat4 = os0.fstat(fd0)                                                 # STEP 380
result = os0.read(fd0,bytes0)                                          # STEP 381
os0.rename(path4,path1)                                                # STEP 382
path4 += "/" + component0                                              # STEP 383
result = stat4.st_size                                                 # STEP 384
ERROR: (<type 'exceptions.AssertionError'>, AssertionError(' (40) == (0) ',), <traceback object at 0x1070df290>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 21991, in act461
    try: assert result == result_REF, " (%s) == (%s) " % (result, result_REF)
FAILURE IS NEW, STORING; NOW 7 DISTINCT FAILURES
UNCAUGHT EXCEPTION
ERROR: (<type 'exceptions.AssertionError'>, AssertionError(' (40) == (0) ',), <traceback object at 0x10718e5a8>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 21991, in act461
    try: assert result == result_REF, " (%s) == (%s) " % (result, result_REF)
Original test has 461 steps

SAVING TEST AS failure.4199.test.7
FINAL VERSION OF TEST, WITH LOGGED REPLAY:
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
path3 += "/" + component1                                               # STEP 28
component1 = "b"                                                        # STEP 29
str4 += 'k'                                                             # STEP 30
bytes1 = 0                                                              # STEP 31
result = os0.path.exists(path1)                                         # STEP 32
str4 += 'g'                                                             # STEP 33
stat4 = os0.stat(path1)                                                 # STEP 34
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 35
result = os0.readlink(path1)                                            # STEP 36
str4 += 'y'                                                             # STEP 37
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 38
stat0 = os0.lstat(path3)                                                # STEP 39
os0.link(path1,path1)                                                   # STEP 40
str0 += 'a'                                                             # STEP 41
str0 += 'l'                                                             # STEP 42
stat1 = os0.fstat(fd0)                                                  # STEP 43
str0 += 'i'                                                             # STEP 44
str4 += 'w'                                                             # STEP 45
os0.remove(path1)                                                       # STEP 46
str1 = ""                                                               # STEP 47
path3 += "/" + component2                                               # STEP 48
str0 += 'n'                                                             # STEP 49
component2 = "omega"                                                    # STEP 50
str0 += 's'                                                             # STEP 51
str4 += " "                                                             # STEP 52
os0.path.getsize(path1)                                                 # STEP 53
str0 += 'i'                                                             # STEP 54
os0.makedirs(path3)                                                     # STEP 55
str4 += 'x'                                                             # STEP 56
result = os0.path.isdir(path3)                                          # STEP 57
str1 += 'k'                                                             # STEP 58
str0 += 'q'                                                             # STEP 59
str4 += 'c'                                                             # STEP 60
str1 = ""                                                               # STEP 61
result = os0.path.isfile(path1)                                         # STEP 62
str4 += 'o'                                                             # STEP 63
bytes1 += 1                                                             # STEP 64
os0.link(path1,path3)                                                   # STEP 65
stat4 = os0.lstat(path3)                                                # STEP 66
str1 += 'j'                                                             # STEP 67
str1 += 'w'                                                             # STEP 68
str0 = ""                                                               # STEP 69
str0 += 'v'                                                             # STEP 70
str0 += 'o'                                                             # STEP 71
str1 += 'n'                                                             # STEP 72
stat4 = os0.stat(path3)                                                 # STEP 73
os0.link(path3,path3)                                                   # STEP 74
os0.path.getsize(path1)                                                 # STEP 75
str4 += 'g'                                                             # STEP 76
result = os0.path.isfile(path1)                                         # STEP 77
str1 += 'n'                                                             # STEP 78
stat2 = os0.stat(path3)                                                 # STEP 79
str1 += 'z'                                                             # STEP 80
result = stat1.st_size                                                  # STEP 81
path3 += "/" + component1                                               # STEP 82
os0.close(fd0)                                                          # STEP 83
str1 += 'n'                                                             # STEP 84
stat3 = os0.lstat(path1)                                                # STEP 85
component1 = "delta"                                                    # STEP 86
os0.symlink(path1,path1)                                                # STEP 87
os0.link(path1,path1)                                                   # STEP 88
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 89
str3 = ""                                                               # STEP 90
os0.write(fd0,str0)                                                     # STEP 91
str4 += 'w'                                                             # STEP 92
str1 += 'b'                                                             # STEP 93
str3 += 'z'                                                             # STEP 94
stat2 = os0.stat(path1)                                                 # STEP 95
os0.path.getsize(path1)                                                 # STEP 96
str3 = ""                                                               # STEP 97
result = os0.path.dirname(path3)                                        # STEP 98
opener0 = newFakeOpener(os0)                                            # STEP 99
os0.removedirs(path3)                                                  # STEP 100
str1 += 's'                                                            # STEP 101
stat3 = os0.stat(path1)                                                # STEP 102
os0.link(path1,path1)                                                  # STEP 103
path2 = "/Volumes/ramdisk/test"                                        # STEP 104
str0 += 'n'                                                            # STEP 105
path3 = "/Volumes/ramdisk/test"                                        # STEP 106
str1 += 'h'                                                            # STEP 107
path2 += "/" + component4                                              # STEP 108
component4 = "epsilon"                                                 # STEP 109
str0 += 'b'                                                            # STEP 110
stat4 = os0.fstat(fd0)                                                 # STEP 111
str1 += 'u'                                                            # STEP 112
str4 += 'q'                                                            # STEP 113
bytes0 += 1                                                            # STEP 114
str3 += 'j'                                                            # STEP 115
str1 += 'f'                                                            # STEP 116
str0 += 'z'                                                            # STEP 117
str4 += 'd'                                                            # STEP 118
str1 += 'h'                                                            # STEP 119
str1 += 'k'                                                            # STEP 120
result = sorted(os0.listdir(path1))                                    # STEP 121
stat2 = os0.fstat(fd0)                                                 # STEP 122
str3 += 't'                                                            # STEP 123
str0 += 'i'                                                            # STEP 124
stat2 = os0.lstat(path1)                                               # STEP 125
file0 = opener0(path1)                                                 # STEP 126
str0 += 'n'                                                            # STEP 127
str3 += 'v'                                                            # STEP 128
result = os0.path.lexists(path1)                                       # STEP 129
result = os0.read(fd0,bytes0)                                          # STEP 130
path1 += "/" + component1                                              # STEP 131
os0.mkdir(path2)                                                       # STEP 132
str4 += 'z'                                                            # STEP 133
os0.mkdir(path3)                                                       # STEP 134
os0.link(path1,path3)                                                  # STEP 135
str3 += 'h'                                                            # STEP 136
str0 += 'q'                                                            # STEP 137
str4 += 'g'                                                            # STEP 138
str3 += 'w'                                                            # STEP 139
str1 += 't'                                                            # STEP 140
stat3 = os0.lstat(path2)                                               # STEP 141
result = os0.path.isdir(path2)                                         # STEP 142
str0 = ""                                                              # STEP 143
str0 += 'w'                                                            # STEP 144
str0 += 'p'                                                            # STEP 145
component1 = "omega"                                                   # STEP 146
str0 += 'p'                                                            # STEP 147
path1 += "/" + component4                                              # STEP 148
result = os0.readlink(path3)                                           # STEP 149
path1 += "/" + component2                                              # STEP 150
str4 += 'c'                                                            # STEP 151
component2 = "delta"                                                   # STEP 152
os0.link(path1,path1)                                                  # STEP 153
os0.path.getsize(path2)                                                # STEP 154
component4 = "gamma"                                                   # STEP 155
str4 += 'h'                                                            # STEP 156
str1 += 'i'                                                            # STEP 157
str3 += 's'                                                            # STEP 158
result = os0.readlink(path1)                                           # STEP 159
str0 += 'z'                                                            # STEP 160
path1 = "/Volumes/ramdisk/test"                                        # STEP 161
str4 += 'o'                                                            # STEP 162
file0 = opener0(path2,'r')                                             # STEP 163
str3 += 's'                                                            # STEP 164
result = stat3.st_size                                                 # STEP 165
stat1 = os0.stat(path2)                                                # STEP 166
result = stat0.st_size                                                 # STEP 167
str3 = ""                                                              # STEP 168
os0.symlink(path2,path1)                                               # STEP 169
str3 += 'u'                                                            # STEP 170
str1 += 'v'                                                            # STEP 171
result = os0.path.dirname(path2)                                       # STEP 172
os0.symlink(path2,path1)                                               # STEP 173
os0.rename(path2,path3)                                                # STEP 174
str0 += 'b'                                                            # STEP 175
str4 += 'r'                                                            # STEP 176
str3 = ""                                                              # STEP 177
os0.symlink(path1,path3)                                               # STEP 178
str3 += 'r'                                                            # STEP 179
str1 += 'f'                                                            # STEP 180
str3 += 't'                                                            # STEP 181
os0.close(fd0)                                                         # STEP 182
str4 += 'w'                                                            # STEP 183
result = os0.path.lexists(path2)                                       # STEP 184
str3 += 'p'                                                            # STEP 185
stat0 = os0.stat(path2)                                                # STEP 186
result = os0.path.abspath(path2)                                       # STEP 187
str4 += 'p'                                                            # STEP 188
str3 += 'k'                                                            # STEP 189
os0.link(path1,path3)                                                  # STEP 190
str1 += 'v'                                                            # STEP 191
str4 = ""                                                              # STEP 192
str4 += 'l'                                                            # STEP 193
str1 += 'i'                                                            # STEP 194
str0 += 'p'                                                            # STEP 195
str1 += 'z'                                                            # STEP 196
str3 += 'n'                                                            # STEP 197
result = os0.path.dirname(path1)                                       # STEP 198
str0 += 's'                                                            # STEP 199
path2 += "/" + component4                                              # STEP 200
str1 += 'o'                                                            # STEP 201
os0.removedirs(path3)                                                  # STEP 202
os0.symlink(path1,path3)                                               # STEP 203
str3 += 'w'                                                            # STEP 204
component4 = "epsilon"                                                 # STEP 205
os0.symlink(path3,path1)                                               # STEP 206
str0 += 'z'                                                            # STEP 207
str0 += 'h'                                                            # STEP 208
stat4 = os0.lstat(path2)                                               # STEP 209
result = os0.readlink(path3)                                           # STEP 210
path4 = "/Volumes/ramdisk/test"                                        # STEP 211
file0 = opener0(path2)                                                 # STEP 212
path4 += "/" + component3                                              # STEP 213
str1 += 'p'                                                            # STEP 214
os0.mkdir(path3)                                                       # STEP 215
str1 += 'x'                                                            # STEP 216
path2 += "/" + component2                                              # STEP 217
result = stat2.st_size                                                 # STEP 218
str3 += 'g'                                                            # STEP 219
bytes1 += 1                                                            # STEP 220
str3 += 'q'                                                            # STEP 221
component3 = "gamma"                                                   # STEP 222
result = os0.path.isdir(path4)                                         # STEP 223
str4 = ""                                                              # STEP 224
bytes2 = 0                                                             # STEP 225
result = os0.path.dirname(path2)                                       # STEP 226
result = os0.path.lexists(path1)                                       # STEP 227
result = os0.path.exists(path1)                                        # STEP 228
result = os0.path.isdir(path3)                                         # STEP 229
str0 += 'u'                                                            # STEP 230
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 231
str1 += 'e'                                                            # STEP 232
component2 = "gamma"                                                   # STEP 233
str4 += 'e'                                                            # STEP 234
str4 += 'n'                                                            # STEP 235
os0.link(path2,path3)                                                  # STEP 236
result = os0.readlink(path1)                                           # STEP 237
os0.removedirs(path1)                                                  # STEP 238
result = os0.path.isabs(path3)                                         # STEP 239
result = stat3.st_nlink                                                # STEP 240
result = os0.readlink(path4)                                           # STEP 241
str3 += 'e'                                                            # STEP 242
result = os0.path.abspath(path2)                                       # STEP 243
result = sorted(os0.listdir(path2))                                    # STEP 244
str4 += 'c'                                                            # STEP 245
os0.close(fd0)                                                         # STEP 246
os0.link(path4,path3)                                                  # STEP 247
str4 += 'j'                                                            # STEP 248
os0.link(path4,path4)                                                  # STEP 249
os0.rename(path4,path1)                                                # STEP 250
path2 += "/" + component3                                              # STEP 251
str4 += 'o'                                                            # STEP 252
os0.link(path1,path3)                                                  # STEP 253
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 254
os0.remove(path3)                                                      # STEP 255
str0 += 'g'                                                            # STEP 256
os0.symlink(path4,path2)                                               # STEP 257
str4 += 'g'                                                            # STEP 258
path1 += "/" + component4                                              # STEP 259
str4 += 't'                                                            # STEP 260
str3 += 'j'                                                            # STEP 261
str3 += 'p'                                                            # STEP 262
str1 += 'g'                                                            # STEP 263
str1 += 'r'                                                            # STEP 264
str1 += 'e'                                                            # STEP 265
str1 += 'o'                                                            # STEP 266
str4 += 'v'                                                            # STEP 267
result = os0.read(fd0,bytes2)                                          # STEP 268
result = os0.readlink(path2)                                           # STEP 269
stat2 = os0.fstat(fd0)                                                 # STEP 270
os0.rmdir(path2)                                                       # STEP 271
str4 += 'n'                                                            # STEP 272
stat4 = os0.lstat(path4)                                               # STEP 273
str4 += 'r'                                                            # STEP 274
str1 += 'u'                                                            # STEP 275
result = sorted(os0.listdir(path2))                                    # STEP 276
str1 += 'l'                                                            # STEP 277
result = os0.path.exists(path1)                                        # STEP 278
component4 = "e"                                                       # STEP 279
str1 += 'q'                                                            # STEP 280
os0.close(fd0)                                                         # STEP 281
os0.symlink(path4,path1)                                               # STEP 282
str0 += 'l'                                                            # STEP 283
file0 = opener0(path3,'r')                                             # STEP 284
str1 += 'j'                                                            # STEP 285
os0.remove(path4)                                                      # STEP 286
file0 = opener0(path3)                                                 # STEP 287
str3 += 'f'                                                            # STEP 288
os0.link(path4,path4)                                                  # STEP 289
component3 = "alpha"                                                   # STEP 290
os0.rmdir(path1)                                                       # STEP 291
result = sorted(os0.listdir(path3))                                    # STEP 292
str0 += 'c'                                                            # STEP 293
os0.symlink(path1,path2)                                               # STEP 294
result = stat2.st_nlink                                                # STEP 295
path1 += "/" + component0                                              # STEP 296
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 297
str0 += 's'                                                            # STEP 298
result = os0.path.dirname(path4)                                       # STEP 299
file0 = opener0(path3,'w')                                             # STEP 300
str4 += 'p'                                                            # STEP 301
component0 = "d"                                                       # STEP 302
result = os0.readlink(path2)                                           # STEP 303
str1 += 'w'                                                            # STEP 304
result = os0.path.exists(path3)                                        # STEP 305
path3 += "/" + component4                                              # STEP 306
os0.write(fd0,str0)                                                    # STEP 307
os0.write(fd0,str3)                                                    # STEP 308
component4 = "delta"                                                   # STEP 309
result = os0.readlink(path2)                                           # STEP 310
str3 += 'f'                                                            # STEP 311
str0 = ""                                                              # STEP 312
os0.path.getsize(path2)                                                # STEP 313
str0 += 'q'                                                            # STEP 314
stat2 = os0.fstat(fd0)                                                 # STEP 315
bytes3 = 0                                                             # STEP 316
os0.makedirs(path4)                                                    # STEP 317
str3 += 'h'                                                            # STEP 318
result = os0.path.isabs(path1)                                         # STEP 319
result = os0.read(fd0,bytes2)                                          # STEP 320
str1 += 'q'                                                            # STEP 321
file0 = opener0(path2,'r')                                             # STEP 322
str1 += 'l'                                                            # STEP 323
result = os0.read(fd0,bytes2)                                          # STEP 324
path2 += "/" + component4                                              # STEP 325
str3 += 'f'                                                            # STEP 326
str3 += 'b'                                                            # STEP 327
str1 += 's'                                                            # STEP 328
component4 = "alpha"                                                   # STEP 329
str1 += 'p'                                                            # STEP 330
result = os0.path.lexists(path1)                                       # STEP 331
str3 += 'x'                                                            # STEP 332
result = stat3.st_nlink                                                # STEP 333
file0 = opener0(path1,'a')                                             # STEP 334
str0 += 'g'                                                            # STEP 335
path2 += "/" + component3                                              # STEP 336
str1 += 'h'                                                            # STEP 337
component3 = "beta"                                                    # STEP 338
path2 += "/" + component0                                              # STEP 339
str0 += 'h'                                                            # STEP 340
component0 = "c"                                                       # STEP 341
result = os0.path.dirname(path4)                                       # STEP 342
bytes2 = 0                                                             # STEP 343
stat4 = os0.lstat(path2)                                               # STEP 344
os0.rmdir(path3)                                                       # STEP 345
result = stat2.st_size                                                 # STEP 346
result = stat3.st_size                                                 # STEP 347
str4 += 'h'                                                            # STEP 348
str3 += 'a'                                                            # STEP 349
stat3 = os0.lstat(path2)                                               # STEP 350
os0.link(path3,path4)                                                  # STEP 351
str1 += 'g'                                                            # STEP 352
result = os0.path.isdir(path4)                                         # STEP 353
result = os0.path.isdir(path1)                                         # STEP 354
os0.rmdir(path4)                                                       # STEP 355
str0 += 'm'                                                            # STEP 356
result = file0.readline(bytes0)                                        # STEP 357
result = os0.path.dirname(path2)                                       # STEP 358
str3 += 'w'                                                            # STEP 359
os0.makedirs(path1)                                                    # STEP 360
result = os0.path.isabs(path2)                                         # STEP 361
str3 += 'w'                                                            # STEP 362
os0.remove(path4)                                                      # STEP 363
str3 += 'q'                                                            # STEP 364
str4 += 'v'                                                            # STEP 365
str4 += 'w'                                                            # STEP 366
str1 += 'j'                                                            # STEP 367
file0.write(str1)                                                      # STEP 368
str3 += 'r'                                                            # STEP 369
str3 += 'm'                                                            # STEP 370
os0.removedirs(path1)                                                  # STEP 371
stat4 = os0.fstat(fd0)                                                 # STEP 372
result = os0.read(fd0,bytes0)                                          # STEP 373
os0.rename(path4,path1)                                                # STEP 374
result = os0.path.isdir(path4)                                         # STEP 375
str4 += 'h'                                                            # STEP 376
str0 += 'p'                                                            # STEP 377
result = os0.path.lexists(path4)                                       # STEP 378
os0.link(path3,path4)                                                  # STEP 379
os0.makedirs(path2)                                                    # STEP 380
str0 += 'n'                                                            # STEP 381
path1 = "/Volumes/ramdisk/test"                                        # STEP 382
os0.link(path4,path2)                                                  # STEP 383
bytes0 = 0                                                             # STEP 384
os0.rmdir(path2)                                                       # STEP 385
str1 += " "                                                            # STEP 386
str0 += 'i'                                                            # STEP 387
os0.symlink(path1,path4)                                               # STEP 388
os0.link(path4,path4)                                                  # STEP 389
str0 += 'i'                                                            # STEP 390
str2 = ""                                                              # STEP 391
os0.write(fd0,str1)                                                    # STEP 392
str4 += 'k'                                                            # STEP 393
result = os0.readlink(path1)                                           # STEP 394
os0.close(fd0)                                                         # STEP 395
result = os0.path.lexists(path2)                                       # STEP 396
file0.seek(bytes1)                                                     # STEP 397
result = os0.path.lexists(path4)                                       # STEP 398
str0 += " "                                                            # STEP 399
os0.symlink(path1,path2)                                               # STEP 400
str4 += 'f'                                                            # STEP 401
result = os0.path.lexists(path4)                                       # STEP 402
str4 += 'e'                                                            # STEP 403
os0.removedirs(path2)                                                  # STEP 404
str3 += 'o'                                                            # STEP 405
result = os0.path.abspath(path3)                                       # STEP 406
str1 += 'l'                                                            # STEP 407
os0.write(fd0,str1)                                                    # STEP 408
stat2 = os0.stat(path3)                                                # STEP 409
result = os0.path.islink(path2)                                        # STEP 410
os0.symlink(path1,path1)                                               # STEP 411
str4 += 'n'                                                            # STEP 412
path3 += "/" + component1                                              # STEP 413
os0.mkdir(path2)                                                       # STEP 414
os0.link(path2,path4)                                                  # STEP 415
path4 += "/" + component4                                              # STEP 416
result = os0.path.exists(path3)                                        # STEP 417
component1 = "gamma"                                                   # STEP 418
str3 += 'u'                                                            # STEP 419
component4 = "h"                                                       # STEP 420
result = stat3.st_size                                                 # STEP 421
os0.symlink(path2,path2)                                               # STEP 422
str1 += 'n'                                                            # STEP 423
result = os0.path.isabs(path1)                                         # STEP 424
str3 += 'h'                                                            # STEP 425
result = os0.path.isfile(path3)                                        # STEP 426
fd0 = os0.open(path2, os.O_RDONLY)                                     # STEP 427
os0.write(fd0,str4)                                                    # STEP 428
os0.link(path4,path1)                                                  # STEP 429
os0.link(path3,path1)                                                  # STEP 430
str2 += 'i'                                                            # STEP 431
file0.seek(bytes3)                                                     # STEP 432
str2 += 'k'                                                            # STEP 433
str4 += 'j'                                                            # STEP 434
os0.remove(path2)                                                      # STEP 435
str3 += 'l'                                                            # STEP 436
str1 += 'z'                                                            # STEP 437
path1 += "/" + component4                                              # STEP 438
result = stat0.st_size                                                 # STEP 439
str3 += 'l'                                                            # STEP 440
result = os0.path.isdir(path2)                                         # STEP 441
result = file0.read(bytes0)                                            # STEP 442
result = sorted(os0.listdir(path2))                                    # STEP 443
os0.makedirs(path1)                                                    # STEP 444
str0 += 'r'                                                            # STEP 445
str0 += 'k'                                                            # STEP 446
str2 += 'i'                                                            # STEP 447
result = stat2.st_nlink                                                # STEP 448
result = stat4.st_nlink                                                # STEP 449
str3 += 'y'                                                            # STEP 450
os0.write(fd0,str3)                                                    # STEP 451
str1 += 'y'                                                            # STEP 452
stat0 = os0.stat(path1)                                                # STEP 453
os0.link(path4,path2)                                                  # STEP 454
str0 += 'c'                                                            # STEP 455
stat3 = os0.stat(path4)                                                # STEP 456
str2 += 'd'                                                            # STEP 457
str0 += 'b'                                                            # STEP 458
str2 += 'n'                                                            # STEP 459
result = stat4.st_size                                                 # STEP 460
ERROR: (<type 'exceptions.AssertionError'>, AssertionError(' (40) == (0) ',), <traceback object at 0x107285dd0>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 21991, in act461
    try: assert result == result_REF, " (%s) == (%s) " % (result, result_REF)
FAILURE IS NEW, STORING; NOW 8 DISTINCT FAILURES
STOPPING TEST DUE TO TIMEOUT, TERMINATED AT LENGTH 445
STOPPING TESTING DUE TO TIMEOUT
41.3600891862 PERCENT COVERED
60.6951110363 TOTAL RUNTIME
145 EXECUTED
13828 TOTAL TEST OPERATIONS
19.3796377182 TIME SPENT EXECUTING TEST OPERATIONS
0.472851276398 TIME SPENT EVALUATING GUARDS AND CHOOSING ACTIONS
0.00906467437744 TIME SPENT CHECKING PROPERTIES
19.3887023926 TOTAL TIME SPENT RUNNING SUT
0.426244735718 TIME SPENT RESTARTING
0.0 TIME SPENT REDUCING TEST CASES
8 FAILED
0 REPEATS OF FAILURES
8 ACTUAL DISTINCT FAILURES

FAILURE 0
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
os0.rename(path4,path1)                                                # STEP 255
path2 += "/" + component3                                              # STEP 256
str4 += 'o'                                                            # STEP 257
os0.link(path1,path3)                                                  # STEP 258
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 259
os0.remove(path3)                                                      # STEP 260
str0 += 'g'                                                            # STEP 261
os0.symlink(path4,path2)                                               # STEP 262
str4 += 'g'                                                            # STEP 263
path1 += "/" + component4                                              # STEP 264
str4 += 't'                                                            # STEP 265
str3 += 'j'                                                            # STEP 266
str3 += 'p'                                                            # STEP 267
str1 += 'g'                                                            # STEP 268
str1 += 'r'                                                            # STEP 269
str1 += 'e'                                                            # STEP 270
str1 += 'o'                                                            # STEP 271
str4 += 'v'                                                            # STEP 272
result = os0.read(fd0,bytes2)                                          # STEP 273
result = os0.readlink(path2)                                           # STEP 274
stat2 = os0.fstat(fd0)                                                 # STEP 275
os0.rmdir(path2)                                                       # STEP 276
str4 += 'n'                                                            # STEP 277
stat4 = os0.lstat(path4)                                               # STEP 278
str4 += 'r'                                                            # STEP 279
str1 += 'u'                                                            # STEP 280
result = sorted(os0.listdir(path2))                                    # STEP 281
str1 += 'l'                                                            # STEP 282
result = os0.path.exists(path1)                                        # STEP 283
component4 = "e"                                                       # STEP 284
str1 += 'q'                                                            # STEP 285
os0.close(fd0)                                                         # STEP 286
os0.symlink(path4,path1)                                               # STEP 287
str0 += 'l'                                                            # STEP 288
file0 = opener0(path3,'r')                                             # STEP 289
str1 += 'j'                                                            # STEP 290
os0.remove(path4)                                                      # STEP 291
file0 = opener0(path3)                                                 # STEP 292
str3 += 'f'                                                            # STEP 293
os0.link(path4,path4)                                                  # STEP 294
component3 = "alpha"                                                   # STEP 295
os0.rmdir(path1)                                                       # STEP 296
result = sorted(os0.listdir(path3))                                    # STEP 297
str0 += 'c'                                                            # STEP 298
os0.symlink(path1,path2)                                               # STEP 299
result = stat2.st_nlink                                                # STEP 300
path1 += "/" + component0                                              # STEP 301
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 302
str0 += 's'                                                            # STEP 303
result = os0.path.dirname(path4)                                       # STEP 304
file0 = opener0(path3,'w')                                             # STEP 305
str4 += 'p'                                                            # STEP 306
component0 = "d"                                                       # STEP 307
result = os0.readlink(path2)                                           # STEP 308
result = os0.read(fd0,bytes4)                                          # STEP 309
str1 += 'w'                                                            # STEP 310
result = os0.path.exists(path3)                                        # STEP 311
path3 += "/" + component4                                              # STEP 312
os0.write(fd0,str0)                                                    # STEP 313
os0.write(fd0,str3)                                                    # STEP 314
component4 = "delta"                                                   # STEP 315
result = os0.readlink(path2)                                           # STEP 316
str3 += 'f'                                                            # STEP 317
str0 = ""                                                              # STEP 318
os0.path.getsize(path2)                                                # STEP 319
str0 += 'q'                                                            # STEP 320
stat2 = os0.fstat(fd0)                                                 # STEP 321
bytes3 = 0                                                             # STEP 322
os0.makedirs(path4)                                                    # STEP 323
result = os0.read(fd0,bytes4)                                          # STEP 324
str3 += 'h'                                                            # STEP 325
result = os0.path.isabs(path1)                                         # STEP 326
result = os0.read(fd0,bytes2)                                          # STEP 327
str1 += 'q'                                                            # STEP 328
file0 = opener0(path2,'r')                                             # STEP 329
str1 += 'l'                                                            # STEP 330
result = os0.read(fd0,bytes2)                                          # STEP 331
path2 += "/" + component4                                              # STEP 332
str3 += 'f'                                                            # STEP 333
str3 += 'b'                                                            # STEP 334
str1 += 's'                                                            # STEP 335
component4 = "alpha"                                                   # STEP 336
str1 += 'p'                                                            # STEP 337
result = os0.path.lexists(path1)                                       # STEP 338
str3 += 'x'                                                            # STEP 339
result = stat3.st_nlink                                                # STEP 340
file0 = opener0(path1,'a')                                             # STEP 341
str0 += 'g'                                                            # STEP 342
path2 += "/" + component3                                              # STEP 343
str1 += 'h'                                                            # STEP 344
component3 = "beta"                                                    # STEP 345
path2 = "/Volumes/ramdisk/test"                                        # STEP 346
path2 += "/" + component0                                              # STEP 347
str0 += 'h'                                                            # STEP 348
component0 = "c"                                                       # STEP 349
result = os0.path.dirname(path4)                                       # STEP 350
bytes2 = 0                                                             # STEP 351
stat4 = os0.lstat(path2)                                               # STEP 352
os0.rmdir(path3)                                                       # STEP 353
result = stat2.st_size                                                 # STEP 354
result = stat3.st_size                                                 # STEP 355
str4 += 'h'                                                            # STEP 356
str3 += 'a'                                                            # STEP 357
stat3 = os0.lstat(path2)                                               # STEP 358
os0.link(path3,path4)                                                  # STEP 359
str1 += 'g'                                                            # STEP 360
result = os0.path.isdir(path4)                                         # STEP 361
result = os0.path.isdir(path1)                                         # STEP 362
os0.rmdir(path4)                                                       # STEP 363
result = sorted(os0.listdir(path4))                                    # STEP 364
result = os0.read(fd0,bytes2)                                          # STEP 365
os0.mkdir(path2)                                                       # STEP 366
os0.remove(path4)                                                      # STEP 367
str4 += 'd'                                                            # STEP 368
result = os0.readlink(path4)                                           # STEP 369
bytes1 += 1                                                            # STEP 370
result = os0.path.islink(path3)                                        # STEP 371
file0.truncate()                                                       # STEP 372
str3 += 'y'                                                            # STEP 373
result = os0.readlink(path2)                                           # STEP 374
file0.seek(bytes0)                                                     # STEP 375
stat2 = os0.stat(path2)                                                # STEP 376
os0.write(fd0,str3)                                                    # STEP 377
result = os0.path.abspath(path1)                                       # STEP 378
os0.symlink(path4,path1)                                               # STEP 379
str4 += 'o'                                                            # STEP 380
os0.rename(path1,path3)                                                # STEP 381
os0.link(path4,path2)                                                  # STEP 382
str3 += 'j'                                                            # STEP 383
path1 = "/Volumes/ramdisk/test"                                        # STEP 384
str4 += 'l'                                                            # STEP 385
os0.write(fd0,str4)                                                    # STEP 386
path4 = "/Volumes/ramdisk/test"                                        # STEP 387
file0.seek(bytes4)                                                     # STEP 388
result = stat4.st_nlink                                                # STEP 389
os0.remove(path4)                                                      # STEP 390
str1 = ""                                                              # STEP 391
result = os0.path.exists(path2)                                        # STEP 392
result = os0.read(fd0,bytes4)                                          # STEP 393
os0.rename(path3,path4)                                                # STEP 394
str0 += 'q'                                                            # STEP 395
result = os0.path.exists(path3)                                        # STEP 396
result = file0.readlines()                                             # STEP 397
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x109270200>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28999, in act575
    result = self.p_file[0].readlines()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE 1
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
path4 += "/" + component1                                              # STEP 363
component1 = "e"                                                       # STEP 364
result = file0.readline()                                              # STEP 365
result = os0.read(fd0,bytes1)                                          # STEP 366
file0.write(str1)                                                      # STEP 367
os0.link(path4,path3)                                                  # STEP 368
result = file0.read(bytes4)                                            # STEP 369
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x1059bb560>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28588, in act568
    result = self.p_file[0].read(self.p_bytes[4])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE 2
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
os0.rename(path4,path1)                                                # STEP 255
path2 += "/" + component3                                              # STEP 256
str4 += 'o'                                                            # STEP 257
os0.link(path1,path3)                                                  # STEP 258
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 259
os0.remove(path3)                                                      # STEP 260
str0 += 'g'                                                            # STEP 261
os0.symlink(path4,path2)                                               # STEP 262
str4 += 'g'                                                            # STEP 263
path1 += "/" + component4                                              # STEP 264
str4 += 't'                                                            # STEP 265
str3 += 'j'                                                            # STEP 266
str3 += 'p'                                                            # STEP 267
str1 += 'g'                                                            # STEP 268
os0.remove(path3)                                                      # STEP 269
str0 += 'b'                                                            # STEP 270
os0.symlink(path3,path2)                                               # STEP 271
path4 = "/Volumes/ramdisk/test"                                        # STEP 272
result = os0.path.dirname(path4)                                       # STEP 273
os0.symlink(path3,path3)                                               # STEP 274
os0.link(path2,path3)                                                  # STEP 275
str1 += 'o'                                                            # STEP 276
str0 += 'o'                                                            # STEP 277
result = os0.path.lexists(path3)                                       # STEP 278
os0.remove(path4)                                                      # STEP 279
str1 += 'y'                                                            # STEP 280
os0.symlink(path1,path3)                                               # STEP 281
result = os0.path.isabs(path3)                                         # STEP 282
os0.mkdir(path4)                                                       # STEP 283
stat3 = os0.fstat(fd0)                                                 # STEP 284
file0 = opener0(path3)                                                 # STEP 285
str3 += 't'                                                            # STEP 286
os0.rename(path1,path4)                                                # STEP 287
os0.link(path1,path2)                                                  # STEP 288
stat4 = os0.fstat(fd0)                                                 # STEP 289
str0 += 'w'                                                            # STEP 290
path4 += "/" + component1                                              # STEP 291
str1 += 'd'                                                            # STEP 292
bytes1 = 0                                                             # STEP 293
stat2 = os0.stat(path1)                                                # STEP 294
str0 += 'z'                                                            # STEP 295
component4 = "delta"                                                   # STEP 296
str3 += 't'                                                            # STEP 297
os0.link(path2,path2)                                                  # STEP 298
file0 = opener0(path4,'w')                                             # STEP 299
os0.symlink(path2,path1)                                               # STEP 300
os0.link(path4,path1)                                                  # STEP 301
str1 += 'e'                                                            # STEP 302
str1 += 'h'                                                            # STEP 303
str3 += 'o'                                                            # STEP 304
str1 += 'l'                                                            # STEP 305
path3 += "/" + component4                                              # STEP 306
result = os0.path.dirname(path1)                                       # STEP 307
os0.symlink(path2,path2)                                               # STEP 308
component4 = "epsilon"                                                 # STEP 309
str3 += " "                                                            # STEP 310
path2 += "/" + component1                                              # STEP 311
os0.write(fd0,str3)                                                    # STEP 312
os0.rename(path4,path3)                                                # STEP 313
component1 = "f"                                                       # STEP 314
path1 += "/" + component0                                              # STEP 315
os0.link(path1,path2)                                                  # STEP 316
result = os0.path.exists(path3)                                        # STEP 317
os0.link(path2,path1)                                                  # STEP 318
str4 = ""                                                              # STEP 319
component0 = "omega"                                                   # STEP 320
result = os0.path.abspath(path4)                                       # STEP 321
result = os0.path.exists(path2)                                        # STEP 322
str3 += 'z'                                                            # STEP 323
os0.symlink(path4,path4)                                               # STEP 324
str4 += 'v'                                                            # STEP 325
os0.symlink(path2,path2)                                               # STEP 326
bytes0 = 0                                                             # STEP 327
os0.write(fd0,str0)                                                    # STEP 328
str1 += 'e'                                                            # STEP 329
os0.symlink(path3,path4)                                               # STEP 330
str1 += 'a'                                                            # STEP 331
str0 += 'j'                                                            # STEP 332
str4 += 'e'                                                            # STEP 333
result = file0.readline(bytes0)                                        # STEP 334
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x1045ff758>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28701, in act570
    result = self.p_file[0].readline(self.p_bytes[0])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE 3
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 'l'                                                            # STEP 196
str1 += 'i'                                                            # STEP 197
str0 += 'p'                                                            # STEP 198
str1 += 'z'                                                            # STEP 199
str3 += 'n'                                                            # STEP 200
result = os0.path.dirname(path1)                                       # STEP 201
str0 += 's'                                                            # STEP 202
path2 += "/" + component4                                              # STEP 203
str1 += 'o'                                                            # STEP 204
os0.removedirs(path3)                                                  # STEP 205
os0.symlink(path1,path3)                                               # STEP 206
str3 += 'w'                                                            # STEP 207
component4 = "epsilon"                                                 # STEP 208
os0.symlink(path3,path1)                                               # STEP 209
str0 += 'z'                                                            # STEP 210
bytes4 += 1                                                            # STEP 211
str0 += 'h'                                                            # STEP 212
stat4 = os0.lstat(path2)                                               # STEP 213
result = os0.readlink(path3)                                           # STEP 214
path4 = "/Volumes/ramdisk/test"                                        # STEP 215
file0 = opener0(path2)                                                 # STEP 216
path4 += "/" + component3                                              # STEP 217
str1 += 'p'                                                            # STEP 218
os0.mkdir(path3)                                                       # STEP 219
str1 += 'x'                                                            # STEP 220
path2 += "/" + component2                                              # STEP 221
result = stat2.st_size                                                 # STEP 222
str3 += 'g'                                                            # STEP 223
bytes1 += 1                                                            # STEP 224
str3 += 'q'                                                            # STEP 225
component3 = "gamma"                                                   # STEP 226
result = os0.path.isdir(path4)                                         # STEP 227
str4 = ""                                                              # STEP 228
bytes2 = 0                                                             # STEP 229
result = os0.path.dirname(path2)                                       # STEP 230
result = os0.path.lexists(path1)                                       # STEP 231
result = os0.path.exists(path1)                                        # STEP 232
result = os0.path.isdir(path3)                                         # STEP 233
str0 += 'u'                                                            # STEP 234
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 235
str1 += 'e'                                                            # STEP 236
component2 = "gamma"                                                   # STEP 237
str4 += 'e'                                                            # STEP 238
str4 += 'n'                                                            # STEP 239
os0.link(path2,path3)                                                  # STEP 240
result = os0.readlink(path1)                                           # STEP 241
os0.removedirs(path1)                                                  # STEP 242
result = os0.path.isabs(path3)                                         # STEP 243
result = stat3.st_nlink                                                # STEP 244
result = os0.readlink(path4)                                           # STEP 245
str3 += 'e'                                                            # STEP 246
result = os0.path.abspath(path2)                                       # STEP 247
result = sorted(os0.listdir(path2))                                    # STEP 248
str4 += 'c'                                                            # STEP 249
os0.close(fd0)                                                         # STEP 250
os0.link(path4,path3)                                                  # STEP 251
str4 += 'j'                                                            # STEP 252
os0.link(path4,path4)                                                  # STEP 253
os0.rename(path4,path1)                                                # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
str0 += 'm'                                                            # STEP 363
result = file0.readline(bytes0)                                        # STEP 364
result = os0.path.dirname(path2)                                       # STEP 365
str3 += 'w'                                                            # STEP 366
os0.makedirs(path1)                                                    # STEP 367
result = os0.path.isabs(path2)                                         # STEP 368
result = stat4.st_nlink                                                # STEP 369
str3 += 'w'                                                            # STEP 370
os0.remove(path4)                                                      # STEP 371
str3 += 'q'                                                            # STEP 372
str4 += 'v'                                                            # STEP 373
str4 += 'w'                                                            # STEP 374
str1 += 'j'                                                            # STEP 375
file0.write(str1)                                                      # STEP 376
str3 += 'r'                                                            # STEP 377
str3 += 'm'                                                            # STEP 378
os0.removedirs(path1)                                                  # STEP 379
stat4 = os0.fstat(fd0)                                                 # STEP 380
result = os0.read(fd0,bytes0)                                          # STEP 381
os0.rename(path4,path1)                                                # STEP 382
result = stat0.st_nlink                                                # STEP 383
result = os0.read(fd0,bytes3)                                          # STEP 384
result = os0.path.isdir(path4)                                         # STEP 385
result = os0.path.isfile(path2)                                        # STEP 386
stat0 = os0.lstat(path4)                                               # STEP 387
os0.rmdir(path1)                                                       # STEP 388
os0.removedirs(path2)                                                  # STEP 389
str4 += 'f'                                                            # STEP 390
str0 += 'x'                                                            # STEP 391
str0 += 'x'                                                            # STEP 392
stat2 = os0.lstat(path4)                                               # STEP 393
str3 += 'v'                                                            # STEP 394
result = file0.readline(bytes0)                                        # STEP 395
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x103123b48>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28701, in act570
    result = self.p_file[0].readline(self.p_bytes[0])
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE 4
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str4 += 'n'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 'l'                                                            # STEP 196
str1 += 'i'                                                            # STEP 197
str0 += 'p'                                                            # STEP 198
str1 += 'z'                                                            # STEP 199
str3 += 'n'                                                            # STEP 200
result = os0.path.dirname(path1)                                       # STEP 201
str0 += 's'                                                            # STEP 202
path2 += "/" + component4                                              # STEP 203
str1 += 'o'                                                            # STEP 204
os0.removedirs(path3)                                                  # STEP 205
os0.symlink(path1,path3)                                               # STEP 206
str3 += 'w'                                                            # STEP 207
component4 = "epsilon"                                                 # STEP 208
os0.symlink(path3,path1)                                               # STEP 209
str0 += 'z'                                                            # STEP 210
bytes4 += 1                                                            # STEP 211
str0 += 'h'                                                            # STEP 212
stat4 = os0.lstat(path2)                                               # STEP 213
result = os0.readlink(path3)                                           # STEP 214
path4 = "/Volumes/ramdisk/test"                                        # STEP 215
file0 = opener0(path2)                                                 # STEP 216
path4 += "/" + component3                                              # STEP 217
str1 += 'p'                                                            # STEP 218
os0.mkdir(path3)                                                       # STEP 219
str1 += 'x'                                                            # STEP 220
path2 += "/" + component2                                              # STEP 221
result = stat2.st_size                                                 # STEP 222
str3 += 'g'                                                            # STEP 223
bytes1 += 1                                                            # STEP 224
str3 += 'q'                                                            # STEP 225
component3 = "gamma"                                                   # STEP 226
result = os0.path.isdir(path4)                                         # STEP 227
str4 = ""                                                              # STEP 228
bytes2 = 0                                                             # STEP 229
result = os0.path.dirname(path2)                                       # STEP 230
result = os0.path.lexists(path1)                                       # STEP 231
result = os0.path.exists(path1)                                        # STEP 232
result = os0.path.isdir(path3)                                         # STEP 233
str0 += 'u'                                                            # STEP 234
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 235
str1 += 'e'                                                            # STEP 236
component2 = "gamma"                                                   # STEP 237
str4 += 'e'                                                            # STEP 238
str4 += 'n'                                                            # STEP 239
os0.link(path2,path3)                                                  # STEP 240
result = os0.readlink(path1)                                           # STEP 241
os0.removedirs(path1)                                                  # STEP 242
result = os0.path.isabs(path3)                                         # STEP 243
result = stat3.st_nlink                                                # STEP 244
result = os0.readlink(path4)                                           # STEP 245
str3 += 'e'                                                            # STEP 246
result = os0.path.abspath(path2)                                       # STEP 247
result = sorted(os0.listdir(path2))                                    # STEP 248
str4 += 'c'                                                            # STEP 249
os0.close(fd0)                                                         # STEP 250
os0.link(path4,path3)                                                  # STEP 251
str4 += 'j'                                                            # STEP 252
os0.link(path4,path4)                                                  # STEP 253
os0.rename(path4,path1)                                                # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
str0 += 'm'                                                            # STEP 363
result = file0.readline(bytes0)                                        # STEP 364
result = os0.path.dirname(path2)                                       # STEP 365
str3 += 'w'                                                            # STEP 366
os0.makedirs(path1)                                                    # STEP 367
result = os0.path.isabs(path2)                                         # STEP 368
result = stat4.st_nlink                                                # STEP 369
str3 += 'w'                                                            # STEP 370
os0.remove(path4)                                                      # STEP 371
str3 += 'q'                                                            # STEP 372
str4 += 'v'                                                            # STEP 373
str4 += 'w'                                                            # STEP 374
str1 += 'j'                                                            # STEP 375
file0.write(str1)                                                      # STEP 376
str3 += 'r'                                                            # STEP 377
str3 += 'm'                                                            # STEP 378
os0.removedirs(path1)                                                  # STEP 379
stat4 = os0.fstat(fd0)                                                 # STEP 380
result = os0.read(fd0,bytes0)                                          # STEP 381
os0.rename(path4,path1)                                                # STEP 382
str1 += 'y'                                                            # STEP 383
str1 += 'l'                                                            # STEP 384
str3 += 'z'                                                            # STEP 385
os0.link(path1,path2)                                                  # STEP 386
str4 += 'c'                                                            # STEP 387
str3 += 'f'                                                            # STEP 388
bytes4 = 0                                                             # STEP 389
str0 += 'l'                                                            # STEP 390
str1 += 'n'                                                            # STEP 391
result = stat0.st_nlink                                                # STEP 392
str1 += 'a'                                                            # STEP 393
result = os0.path.abspath(path1)                                       # STEP 394
file0.write(str3)                                                      # STEP 395
result = sorted(os0.listdir(path4))                                    # STEP 396
os0.symlink(path4,path1)                                               # STEP 397
str4 += 'y'                                                            # STEP 398
os0.rmdir(path3)                                                       # STEP 399
str3 += 'x'                                                            # STEP 400
os0.write(fd0,str3)                                                    # STEP 401
result = os0.path.abspath(path3)                                       # STEP 402
result = os0.path.exists(path2)                                        # STEP 403
str1 += 's'                                                            # STEP 404
file0.seek(bytes3)                                                     # STEP 405
path2 += "/" + component1                                              # STEP 406
stat2 = os0.fstat(fd0)                                                 # STEP 407
str0 += 'm'                                                            # STEP 408
component1 = "beta"                                                    # STEP 409
result = file0.readlines()                                             # STEP 410
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x106d9dfc8>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28999, in act575
    result = self.p_file[0].readlines()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE 5
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 't'                                                            # STEP 196
str4 += 'l'                                                            # STEP 197
str1 += 'i'                                                            # STEP 198
str0 += 'p'                                                            # STEP 199
str1 += 'z'                                                            # STEP 200
str3 += 'n'                                                            # STEP 201
result = os0.path.dirname(path1)                                       # STEP 202
str0 += 's'                                                            # STEP 203
path2 += "/" + component4                                              # STEP 204
str1 += 'o'                                                            # STEP 205
os0.removedirs(path3)                                                  # STEP 206
os0.symlink(path1,path3)                                               # STEP 207
str3 += 'w'                                                            # STEP 208
component4 = "epsilon"                                                 # STEP 209
os0.symlink(path3,path1)                                               # STEP 210
str0 += 'z'                                                            # STEP 211
bytes4 += 1                                                            # STEP 212
str0 += 'h'                                                            # STEP 213
stat4 = os0.lstat(path2)                                               # STEP 214
result = os0.readlink(path3)                                           # STEP 215
path4 = "/Volumes/ramdisk/test"                                        # STEP 216
file0 = opener0(path2)                                                 # STEP 217
path4 += "/" + component3                                              # STEP 218
str1 += 'p'                                                            # STEP 219
os0.mkdir(path3)                                                       # STEP 220
str1 += 'x'                                                            # STEP 221
path2 += "/" + component2                                              # STEP 222
result = stat2.st_size                                                 # STEP 223
str3 += 'g'                                                            # STEP 224
bytes1 += 1                                                            # STEP 225
str3 += 'q'                                                            # STEP 226
component3 = "gamma"                                                   # STEP 227
result = os0.path.isdir(path4)                                         # STEP 228
str4 = ""                                                              # STEP 229
bytes2 = 0                                                             # STEP 230
result = os0.path.dirname(path2)                                       # STEP 231
result = os0.path.lexists(path1)                                       # STEP 232
result = os0.path.exists(path1)                                        # STEP 233
result = os0.path.isdir(path3)                                         # STEP 234
str0 += 'u'                                                            # STEP 235
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 236
str1 += 'e'                                                            # STEP 237
component2 = "gamma"                                                   # STEP 238
str4 += 'e'                                                            # STEP 239
str4 += 'n'                                                            # STEP 240
os0.link(path2,path3)                                                  # STEP 241
result = os0.readlink(path1)                                           # STEP 242
os0.removedirs(path1)                                                  # STEP 243
result = os0.path.isabs(path3)                                         # STEP 244
result = stat3.st_nlink                                                # STEP 245
result = os0.readlink(path4)                                           # STEP 246
str3 += 'e'                                                            # STEP 247
result = os0.path.abspath(path2)                                       # STEP 248
result = sorted(os0.listdir(path2))                                    # STEP 249
str4 += 'c'                                                            # STEP 250
os0.close(fd0)                                                         # STEP 251
os0.link(path4,path3)                                                  # STEP 252
str4 += 'j'                                                            # STEP 253
os0.link(path4,path4)                                                  # STEP 254
os0.rename(path4,path1)                                                # STEP 255
path2 += "/" + component3                                              # STEP 256
str4 += 'o'                                                            # STEP 257
os0.link(path1,path3)                                                  # STEP 258
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 259
os0.remove(path3)                                                      # STEP 260
str0 += 'g'                                                            # STEP 261
os0.symlink(path4,path2)                                               # STEP 262
str4 += 'g'                                                            # STEP 263
path1 += "/" + component4                                              # STEP 264
str4 += 't'                                                            # STEP 265
str3 += 'j'                                                            # STEP 266
str3 += 'p'                                                            # STEP 267
str1 += 'g'                                                            # STEP 268
str1 += 'r'                                                            # STEP 269
str1 += 'e'                                                            # STEP 270
str1 += 'o'                                                            # STEP 271
str4 += 'v'                                                            # STEP 272
result = os0.read(fd0,bytes2)                                          # STEP 273
result = os0.readlink(path2)                                           # STEP 274
stat2 = os0.fstat(fd0)                                                 # STEP 275
os0.rmdir(path2)                                                       # STEP 276
str4 += 'n'                                                            # STEP 277
stat4 = os0.lstat(path4)                                               # STEP 278
str4 += 'r'                                                            # STEP 279
str1 += 'u'                                                            # STEP 280
result = sorted(os0.listdir(path2))                                    # STEP 281
str1 += 'l'                                                            # STEP 282
result = os0.path.exists(path1)                                        # STEP 283
component4 = "e"                                                       # STEP 284
str1 += 'q'                                                            # STEP 285
os0.close(fd0)                                                         # STEP 286
os0.symlink(path4,path1)                                               # STEP 287
str0 += 'l'                                                            # STEP 288
file0 = opener0(path3,'r')                                             # STEP 289
str1 += 'j'                                                            # STEP 290
os0.remove(path4)                                                      # STEP 291
file0 = opener0(path3)                                                 # STEP 292
str3 += 'f'                                                            # STEP 293
os0.link(path4,path4)                                                  # STEP 294
component3 = "alpha"                                                   # STEP 295
os0.rmdir(path1)                                                       # STEP 296
result = sorted(os0.listdir(path3))                                    # STEP 297
str0 += 'c'                                                            # STEP 298
os0.symlink(path1,path2)                                               # STEP 299
result = stat2.st_nlink                                                # STEP 300
path1 += "/" + component0                                              # STEP 301
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 302
str0 += 's'                                                            # STEP 303
result = os0.path.dirname(path4)                                       # STEP 304
file0 = opener0(path3,'w')                                             # STEP 305
str4 += 'p'                                                            # STEP 306
component0 = "d"                                                       # STEP 307
result = os0.readlink(path2)                                           # STEP 308
result = os0.read(fd0,bytes4)                                          # STEP 309
str1 += 'w'                                                            # STEP 310
result = os0.path.exists(path3)                                        # STEP 311
path3 += "/" + component4                                              # STEP 312
os0.write(fd0,str0)                                                    # STEP 313
os0.write(fd0,str3)                                                    # STEP 314
component4 = "delta"                                                   # STEP 315
result = os0.readlink(path2)                                           # STEP 316
str3 += 'f'                                                            # STEP 317
str0 = ""                                                              # STEP 318
os0.path.getsize(path2)                                                # STEP 319
str0 += 'q'                                                            # STEP 320
stat2 = os0.fstat(fd0)                                                 # STEP 321
bytes3 = 0                                                             # STEP 322
os0.makedirs(path4)                                                    # STEP 323
result = os0.read(fd0,bytes4)                                          # STEP 324
str3 += 'h'                                                            # STEP 325
result = os0.path.isabs(path1)                                         # STEP 326
result = os0.read(fd0,bytes2)                                          # STEP 327
str1 += 'q'                                                            # STEP 328
file0 = opener0(path2,'r')                                             # STEP 329
str1 += 'l'                                                            # STEP 330
result = os0.read(fd0,bytes2)                                          # STEP 331
path2 += "/" + component4                                              # STEP 332
str3 += 'f'                                                            # STEP 333
str3 += 'b'                                                            # STEP 334
str1 += 's'                                                            # STEP 335
component4 = "alpha"                                                   # STEP 336
str1 += 'p'                                                            # STEP 337
result = os0.path.lexists(path1)                                       # STEP 338
str3 += 'x'                                                            # STEP 339
result = stat3.st_nlink                                                # STEP 340
file0 = opener0(path1,'a')                                             # STEP 341
str0 += 'g'                                                            # STEP 342
path2 += "/" + component3                                              # STEP 343
str1 += 'h'                                                            # STEP 344
component3 = "beta"                                                    # STEP 345
path2 = "/Volumes/ramdisk/test"                                        # STEP 346
path2 += "/" + component0                                              # STEP 347
str0 += 'h'                                                            # STEP 348
component0 = "c"                                                       # STEP 349
result = os0.path.dirname(path4)                                       # STEP 350
bytes2 = 0                                                             # STEP 351
stat4 = os0.lstat(path2)                                               # STEP 352
os0.rmdir(path3)                                                       # STEP 353
result = stat2.st_size                                                 # STEP 354
result = stat3.st_size                                                 # STEP 355
str4 += 'h'                                                            # STEP 356
str3 += 'a'                                                            # STEP 357
stat3 = os0.lstat(path2)                                               # STEP 358
os0.link(path3,path4)                                                  # STEP 359
str1 += 'g'                                                            # STEP 360
result = os0.path.isdir(path4)                                         # STEP 361
result = os0.path.isdir(path1)                                         # STEP 362
os0.rmdir(path4)                                                       # STEP 363
str1 += 'o'                                                            # STEP 364
str1 += 'c'                                                            # STEP 365
path3 += "/" + component3                                              # STEP 366
result = os0.read(fd0,bytes1)                                          # STEP 367
str0 += 'k'                                                            # STEP 368
os0.link(path1,path4)                                                  # STEP 369
os0.symlink(path1,path3)                                               # STEP 370
path2 += "/" + component1                                              # STEP 371
stat2 = os0.lstat(path3)                                               # STEP 372
str1 += 's'                                                            # STEP 373
result = os0.path.lexists(path1)                                       # STEP 374
str1 += 'j'                                                            # STEP 375
component3 = "c"                                                       # STEP 376
result = os0.path.abspath(path4)                                       # STEP 377
os0.mkdir(path1)                                                       # STEP 378
os0.rename(path2,path1)                                                # STEP 379
str0 += 't'                                                            # STEP 380
path3 += "/" + component3                                              # STEP 381
str4 += 'a'                                                            # STEP 382
path1 += "/" + component0                                              # STEP 383
component0 = "lambda"                                                  # STEP 384
str0 += 'l'                                                            # STEP 385
os0.symlink(path1,path3)                                               # STEP 386
os0.mkdir(path3)                                                       # STEP 387
str2 = ""                                                              # STEP 388
os0.link(path3,path3)                                                  # STEP 389
str4 += 'x'                                                            # STEP 390
component3 = "h"                                                       # STEP 391
str0 += 'k'                                                            # STEP 392
result = sorted(os0.listdir(path1))                                    # STEP 393
os0.link(path2,path3)                                                  # STEP 394
os0.remove(path2)                                                      # STEP 395
path3 += "/" + component4                                              # STEP 396
str4 += 'x'                                                            # STEP 397
str3 += 'k'                                                            # STEP 398
str1 += 'p'                                                            # STEP 399
result = os0.path.isfile(path1)                                        # STEP 400
str0 += 'j'                                                            # STEP 401
file0.next()                                                           # STEP 402
os0.link(path1,path4)                                                  # STEP 403
path1 = "/Volumes/ramdisk/test"                                        # STEP 404
os0.link(path3,path4)                                                  # STEP 405
component4 = "beta"                                                    # STEP 406
path3 += "/" + component1                                              # STEP 407
str3 += 'n'                                                            # STEP 408
bytes4 = 0                                                             # STEP 409
str4 += 'q'                                                            # STEP 410
result = file0.readline()                                              # STEP 411
ERROR: (<type 'exceptions.OSError'>, OSError(9, 'File is not open for reading.'), <traceback object at 0x105904cb0>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 28646, in act569
    result = self.p_file[0].readline()
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4284, in read_error
    self._raise('File is not open for reading.')
  File "/Users/alex/tstl/examples/pyfakefs/pyfakefs/fake_filesystem.py", line 4112, in _raise
    raise OSError(errno.EBADF, message)
FAILURE 6
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
bytes4 = 0                                                              # STEP 28
path3 += "/" + component1                                               # STEP 29
component1 = "b"                                                        # STEP 30
str4 += 'k'                                                             # STEP 31
bytes1 = 0                                                              # STEP 32
result = os0.path.exists(path1)                                         # STEP 33
str4 += 'g'                                                             # STEP 34
stat4 = os0.stat(path1)                                                 # STEP 35
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 36
result = os0.readlink(path1)                                            # STEP 37
str4 += 'y'                                                             # STEP 38
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 39
stat0 = os0.lstat(path3)                                                # STEP 40
os0.link(path1,path1)                                                   # STEP 41
str0 += 'a'                                                             # STEP 42
str0 += 'l'                                                             # STEP 43
stat1 = os0.fstat(fd0)                                                  # STEP 44
str0 += 'i'                                                             # STEP 45
str4 += 'w'                                                             # STEP 46
os0.remove(path1)                                                       # STEP 47
str1 = ""                                                               # STEP 48
path3 += "/" + component2                                               # STEP 49
str0 += 'n'                                                             # STEP 50
component2 = "omega"                                                    # STEP 51
str0 += 's'                                                             # STEP 52
str4 += " "                                                             # STEP 53
os0.path.getsize(path1)                                                 # STEP 54
str0 += 'i'                                                             # STEP 55
os0.makedirs(path3)                                                     # STEP 56
str4 += 'x'                                                             # STEP 57
result = os0.path.isdir(path3)                                          # STEP 58
str1 += 'k'                                                             # STEP 59
str0 += 'q'                                                             # STEP 60
str4 += 'c'                                                             # STEP 61
str1 = ""                                                               # STEP 62
result = os0.path.isfile(path1)                                         # STEP 63
str4 += 'o'                                                             # STEP 64
bytes1 += 1                                                             # STEP 65
os0.link(path1,path3)                                                   # STEP 66
stat4 = os0.lstat(path3)                                                # STEP 67
str1 += 'j'                                                             # STEP 68
str1 += 'w'                                                             # STEP 69
str0 = ""                                                               # STEP 70
str0 += 'v'                                                             # STEP 71
str0 += 'o'                                                             # STEP 72
str1 += 'n'                                                             # STEP 73
stat4 = os0.stat(path3)                                                 # STEP 74
os0.link(path3,path3)                                                   # STEP 75
os0.path.getsize(path1)                                                 # STEP 76
str4 += 'g'                                                             # STEP 77
result = os0.path.isfile(path1)                                         # STEP 78
str1 += 'n'                                                             # STEP 79
stat2 = os0.stat(path3)                                                 # STEP 80
str1 += 'z'                                                             # STEP 81
result = stat1.st_size                                                  # STEP 82
path3 += "/" + component1                                               # STEP 83
os0.close(fd0)                                                          # STEP 84
str1 += 'n'                                                             # STEP 85
stat3 = os0.lstat(path1)                                                # STEP 86
component1 = "delta"                                                    # STEP 87
os0.symlink(path1,path1)                                                # STEP 88
os0.link(path1,path1)                                                   # STEP 89
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 90
str3 = ""                                                               # STEP 91
os0.write(fd0,str0)                                                     # STEP 92
str4 += 'w'                                                             # STEP 93
str1 += 'b'                                                             # STEP 94
str3 += 'z'                                                             # STEP 95
stat2 = os0.stat(path1)                                                 # STEP 96
os0.path.getsize(path1)                                                 # STEP 97
str3 = ""                                                               # STEP 98
result = os0.path.dirname(path3)                                        # STEP 99
opener0 = newFakeOpener(os0)                                           # STEP 100
os0.removedirs(path3)                                                  # STEP 101
result = os0.read(fd0,bytes4)                                          # STEP 102
str1 += 's'                                                            # STEP 103
stat3 = os0.stat(path1)                                                # STEP 104
os0.link(path1,path1)                                                  # STEP 105
path2 = "/Volumes/ramdisk/test"                                        # STEP 106
str0 += 'n'                                                            # STEP 107
path3 = "/Volumes/ramdisk/test"                                        # STEP 108
str1 += 'h'                                                            # STEP 109
path2 += "/" + component4                                              # STEP 110
component4 = "epsilon"                                                 # STEP 111
str0 += 'b'                                                            # STEP 112
stat4 = os0.fstat(fd0)                                                 # STEP 113
str1 += 'u'                                                            # STEP 114
str4 += 'q'                                                            # STEP 115
bytes0 += 1                                                            # STEP 116
str3 += 'j'                                                            # STEP 117
str1 += 'f'                                                            # STEP 118
str0 += 'z'                                                            # STEP 119
str4 += 'd'                                                            # STEP 120
str1 += 'h'                                                            # STEP 121
str1 += 'k'                                                            # STEP 122
result = sorted(os0.listdir(path1))                                    # STEP 123
stat2 = os0.fstat(fd0)                                                 # STEP 124
str3 += 't'                                                            # STEP 125
str0 += 'i'                                                            # STEP 126
stat2 = os0.lstat(path1)                                               # STEP 127
file0 = opener0(path1)                                                 # STEP 128
str0 += 'n'                                                            # STEP 129
str3 += 'v'                                                            # STEP 130
result = os0.path.lexists(path1)                                       # STEP 131
result = os0.read(fd0,bytes0)                                          # STEP 132
path1 += "/" + component1                                              # STEP 133
os0.mkdir(path2)                                                       # STEP 134
str4 += 'z'                                                            # STEP 135
os0.mkdir(path3)                                                       # STEP 136
os0.link(path1,path3)                                                  # STEP 137
str3 += 'h'                                                            # STEP 138
str0 += 'q'                                                            # STEP 139
str4 += 'g'                                                            # STEP 140
str3 += 'w'                                                            # STEP 141
str1 += 't'                                                            # STEP 142
stat3 = os0.lstat(path2)                                               # STEP 143
result = os0.path.isdir(path2)                                         # STEP 144
str0 = ""                                                              # STEP 145
str0 += 'w'                                                            # STEP 146
str0 += 'p'                                                            # STEP 147
component1 = "omega"                                                   # STEP 148
str0 += 'p'                                                            # STEP 149
path1 += "/" + component4                                              # STEP 150
result = os0.readlink(path3)                                           # STEP 151
path1 += "/" + component2                                              # STEP 152
str4 += 'c'                                                            # STEP 153
component2 = "delta"                                                   # STEP 154
os0.link(path1,path1)                                                  # STEP 155
os0.path.getsize(path2)                                                # STEP 156
component4 = "gamma"                                                   # STEP 157
str4 += 'h'                                                            # STEP 158
str1 += 'i'                                                            # STEP 159
str3 += 's'                                                            # STEP 160
result = os0.readlink(path1)                                           # STEP 161
str0 += 'z'                                                            # STEP 162
path1 = "/Volumes/ramdisk/test"                                        # STEP 163
bytes4 += 1                                                            # STEP 164
str4 += 'o'                                                            # STEP 165
file0 = opener0(path2,'r')                                             # STEP 166
str3 += 's'                                                            # STEP 167
result = stat3.st_size                                                 # STEP 168
stat1 = os0.stat(path2)                                                # STEP 169
result = stat0.st_size                                                 # STEP 170
str3 = ""                                                              # STEP 171
os0.symlink(path2,path1)                                               # STEP 172
str3 += 'u'                                                            # STEP 173
str1 += 'v'                                                            # STEP 174
result = os0.path.dirname(path2)                                       # STEP 175
os0.symlink(path2,path1)                                               # STEP 176
os0.rename(path2,path3)                                                # STEP 177
str0 += 'b'                                                            # STEP 178
str4 += 'r'                                                            # STEP 179
str3 = ""                                                              # STEP 180
os0.symlink(path1,path3)                                               # STEP 181
str3 += 'r'                                                            # STEP 182
str1 += 'f'                                                            # STEP 183
str3 += 't'                                                            # STEP 184
os0.close(fd0)                                                         # STEP 185
str4 += 'w'                                                            # STEP 186
result = os0.path.lexists(path2)                                       # STEP 187
str3 += 'p'                                                            # STEP 188
stat0 = os0.stat(path2)                                                # STEP 189
result = os0.path.abspath(path2)                                       # STEP 190
str4 += 'p'                                                            # STEP 191
str3 += 'k'                                                            # STEP 192
os0.link(path1,path3)                                                  # STEP 193
str1 += 'v'                                                            # STEP 194
str4 = ""                                                              # STEP 195
str4 += 'l'                                                            # STEP 196
str1 += 'i'                                                            # STEP 197
str0 += 'p'                                                            # STEP 198
str1 += 'z'                                                            # STEP 199
str3 += 'n'                                                            # STEP 200
result = os0.path.dirname(path1)                                       # STEP 201
str0 += 's'                                                            # STEP 202
path2 += "/" + component4                                              # STEP 203
str1 += 'o'                                                            # STEP 204
os0.removedirs(path3)                                                  # STEP 205
os0.symlink(path1,path3)                                               # STEP 206
str3 += 'w'                                                            # STEP 207
component4 = "epsilon"                                                 # STEP 208
os0.symlink(path3,path1)                                               # STEP 209
str0 += 'z'                                                            # STEP 210
bytes4 += 1                                                            # STEP 211
str0 += 'h'                                                            # STEP 212
stat4 = os0.lstat(path2)                                               # STEP 213
result = os0.readlink(path3)                                           # STEP 214
path4 = "/Volumes/ramdisk/test"                                        # STEP 215
file0 = opener0(path2)                                                 # STEP 216
path4 += "/" + component3                                              # STEP 217
str1 += 'p'                                                            # STEP 218
os0.mkdir(path3)                                                       # STEP 219
str1 += 'x'                                                            # STEP 220
path2 += "/" + component2                                              # STEP 221
result = stat2.st_size                                                 # STEP 222
str3 += 'g'                                                            # STEP 223
bytes1 += 1                                                            # STEP 224
str3 += 'q'                                                            # STEP 225
component3 = "gamma"                                                   # STEP 226
result = os0.path.isdir(path4)                                         # STEP 227
str4 = ""                                                              # STEP 228
bytes2 = 0                                                             # STEP 229
result = os0.path.dirname(path2)                                       # STEP 230
result = os0.path.lexists(path1)                                       # STEP 231
result = os0.path.exists(path1)                                        # STEP 232
result = os0.path.isdir(path3)                                         # STEP 233
str0 += 'u'                                                            # STEP 234
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 235
str1 += 'e'                                                            # STEP 236
component2 = "gamma"                                                   # STEP 237
str4 += 'e'                                                            # STEP 238
str4 += 'n'                                                            # STEP 239
os0.link(path2,path3)                                                  # STEP 240
result = os0.readlink(path1)                                           # STEP 241
os0.removedirs(path1)                                                  # STEP 242
result = os0.path.isabs(path3)                                         # STEP 243
result = stat3.st_nlink                                                # STEP 244
result = os0.readlink(path4)                                           # STEP 245
str3 += 'e'                                                            # STEP 246
result = os0.path.abspath(path2)                                       # STEP 247
result = sorted(os0.listdir(path2))                                    # STEP 248
str4 += 'c'                                                            # STEP 249
os0.close(fd0)                                                         # STEP 250
os0.link(path4,path3)                                                  # STEP 251
str4 += 'j'                                                            # STEP 252
os0.link(path4,path4)                                                  # STEP 253
os0.rename(path4,path1)                                                # STEP 254
path2 += "/" + component3                                              # STEP 255
str4 += 'o'                                                            # STEP 256
os0.link(path1,path3)                                                  # STEP 257
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 258
os0.remove(path3)                                                      # STEP 259
str0 += 'g'                                                            # STEP 260
os0.symlink(path4,path2)                                               # STEP 261
str4 += 'g'                                                            # STEP 262
path1 += "/" + component4                                              # STEP 263
str4 += 't'                                                            # STEP 264
str3 += 'j'                                                            # STEP 265
str3 += 'p'                                                            # STEP 266
str1 += 'g'                                                            # STEP 267
str1 += 'r'                                                            # STEP 268
str1 += 'e'                                                            # STEP 269
str1 += 'o'                                                            # STEP 270
str4 += 'v'                                                            # STEP 271
result = os0.read(fd0,bytes2)                                          # STEP 272
result = os0.readlink(path2)                                           # STEP 273
stat2 = os0.fstat(fd0)                                                 # STEP 274
os0.rmdir(path2)                                                       # STEP 275
str4 += 'n'                                                            # STEP 276
stat4 = os0.lstat(path4)                                               # STEP 277
str4 += 'r'                                                            # STEP 278
str1 += 'u'                                                            # STEP 279
result = sorted(os0.listdir(path2))                                    # STEP 280
str1 += 'l'                                                            # STEP 281
result = os0.path.exists(path1)                                        # STEP 282
component4 = "e"                                                       # STEP 283
str1 += 'q'                                                            # STEP 284
os0.close(fd0)                                                         # STEP 285
os0.symlink(path4,path1)                                               # STEP 286
str0 += 'l'                                                            # STEP 287
file0 = opener0(path3,'r')                                             # STEP 288
str1 += 'j'                                                            # STEP 289
os0.remove(path4)                                                      # STEP 290
file0 = opener0(path3)                                                 # STEP 291
str3 += 'f'                                                            # STEP 292
os0.link(path4,path4)                                                  # STEP 293
component3 = "alpha"                                                   # STEP 294
os0.rmdir(path1)                                                       # STEP 295
result = sorted(os0.listdir(path3))                                    # STEP 296
str0 += 'c'                                                            # STEP 297
os0.symlink(path1,path2)                                               # STEP 298
result = stat2.st_nlink                                                # STEP 299
path1 += "/" + component0                                              # STEP 300
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 301
str0 += 's'                                                            # STEP 302
result = os0.path.dirname(path4)                                       # STEP 303
file0 = opener0(path3,'w')                                             # STEP 304
str4 += 'p'                                                            # STEP 305
component0 = "d"                                                       # STEP 306
result = os0.readlink(path2)                                           # STEP 307
result = os0.read(fd0,bytes4)                                          # STEP 308
str1 += 'w'                                                            # STEP 309
result = os0.path.exists(path3)                                        # STEP 310
path3 += "/" + component4                                              # STEP 311
os0.write(fd0,str0)                                                    # STEP 312
os0.write(fd0,str3)                                                    # STEP 313
component4 = "delta"                                                   # STEP 314
result = os0.readlink(path2)                                           # STEP 315
str3 += 'f'                                                            # STEP 316
str0 = ""                                                              # STEP 317
os0.path.getsize(path2)                                                # STEP 318
str0 += 'q'                                                            # STEP 319
stat2 = os0.fstat(fd0)                                                 # STEP 320
bytes3 = 0                                                             # STEP 321
os0.makedirs(path4)                                                    # STEP 322
result = os0.read(fd0,bytes4)                                          # STEP 323
str3 += 'h'                                                            # STEP 324
result = os0.path.isabs(path1)                                         # STEP 325
result = os0.read(fd0,bytes2)                                          # STEP 326
str1 += 'q'                                                            # STEP 327
file0 = opener0(path2,'r')                                             # STEP 328
str1 += 'l'                                                            # STEP 329
result = os0.read(fd0,bytes2)                                          # STEP 330
path2 += "/" + component4                                              # STEP 331
str3 += 'f'                                                            # STEP 332
str3 += 'b'                                                            # STEP 333
str1 += 's'                                                            # STEP 334
component4 = "alpha"                                                   # STEP 335
str1 += 'p'                                                            # STEP 336
result = os0.path.lexists(path1)                                       # STEP 337
str3 += 'x'                                                            # STEP 338
result = stat3.st_nlink                                                # STEP 339
file0 = opener0(path1,'a')                                             # STEP 340
str0 += 'g'                                                            # STEP 341
path2 += "/" + component3                                              # STEP 342
str1 += 'h'                                                            # STEP 343
component3 = "beta"                                                    # STEP 344
path2 = "/Volumes/ramdisk/test"                                        # STEP 345
path2 += "/" + component0                                              # STEP 346
str0 += 'h'                                                            # STEP 347
component0 = "c"                                                       # STEP 348
result = os0.path.dirname(path4)                                       # STEP 349
bytes2 = 0                                                             # STEP 350
stat4 = os0.lstat(path2)                                               # STEP 351
os0.rmdir(path3)                                                       # STEP 352
result = stat2.st_size                                                 # STEP 353
result = stat3.st_size                                                 # STEP 354
str4 += 'h'                                                            # STEP 355
str3 += 'a'                                                            # STEP 356
stat3 = os0.lstat(path2)                                               # STEP 357
os0.link(path3,path4)                                                  # STEP 358
str1 += 'g'                                                            # STEP 359
result = os0.path.isdir(path4)                                         # STEP 360
result = os0.path.isdir(path1)                                         # STEP 361
os0.rmdir(path4)                                                       # STEP 362
str0 += 'm'                                                            # STEP 363
result = file0.readline(bytes0)                                        # STEP 364
result = os0.path.dirname(path2)                                       # STEP 365
str3 += 'w'                                                            # STEP 366
os0.makedirs(path1)                                                    # STEP 367
result = os0.path.isabs(path2)                                         # STEP 368
result = stat4.st_nlink                                                # STEP 369
str3 += 'w'                                                            # STEP 370
os0.remove(path4)                                                      # STEP 371
str3 += 'q'                                                            # STEP 372
str4 += 'v'                                                            # STEP 373
str4 += 'w'                                                            # STEP 374
str1 += 'j'                                                            # STEP 375
file0.write(str1)                                                      # STEP 376
str3 += 'r'                                                            # STEP 377
str3 += 'm'                                                            # STEP 378
os0.removedirs(path1)                                                  # STEP 379
stat4 = os0.fstat(fd0)                                                 # STEP 380
result = os0.read(fd0,bytes0)                                          # STEP 381
os0.rename(path4,path1)                                                # STEP 382
path4 += "/" + component0                                              # STEP 383
result = stat4.st_size                                                 # STEP 384
ERROR: (<type 'exceptions.AssertionError'>, AssertionError(' (40) == (0) ',), <traceback object at 0x1070df290>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 21991, in act461
    try: assert result == result_REF, " (%s) == (%s) " % (result, result_REF)
FAILURE 7
component4 = "d"                                                         # STEP 0
component1 = "f"                                                         # STEP 1
component3 = "lambda"                                                    # STEP 2
component0 = "gamma"                                                     # STEP 3
bytes0 = 0                                                               # STEP 4
component2 = "h"                                                         # STEP 5
str0 = ""                                                                # STEP 6
str0 += 'z'                                                              # STEP 7
str0 += 'r'                                                              # STEP 8
str0 += 'q'                                                              # STEP 9
str0 += " "                                                             # STEP 10
os0 = newFakeOS()                                                       # STEP 11
path1 = "/Volumes/ramdisk/test"                                         # STEP 12
str0 += 's'                                                             # STEP 13
bytes0 += 1                                                             # STEP 14
path1 += "/" + component4                                               # STEP 15
component4 = "d"                                                        # STEP 16
str0 += 'v'                                                             # STEP 17
str0 += 'a'                                                             # STEP 18
str0 += 'a'                                                             # STEP 19
str0 += 'u'                                                             # STEP 20
path3 = "/Volumes/ramdisk/test"                                         # STEP 21
os0.link(path3,path3)                                                   # STEP 22
os0.path.getsize(path1)                                                 # STEP 23
stat2 = os0.stat(path1)                                                 # STEP 24
stat1 = os0.lstat(path1)                                                # STEP 25
str4 = ""                                                               # STEP 26
result = os0.path.islink(path1)                                         # STEP 27
path3 += "/" + component1                                               # STEP 28
component1 = "b"                                                        # STEP 29
str4 += 'k'                                                             # STEP 30
bytes1 = 0                                                              # STEP 31
result = os0.path.exists(path1)                                         # STEP 32
str4 += 'g'                                                             # STEP 33
stat4 = os0.stat(path1)                                                 # STEP 34
fd0 = os0.open(path3, os.O_RDWR)                                        # STEP 35
result = os0.readlink(path1)                                            # STEP 36
str4 += 'y'                                                             # STEP 37
fd0 = os0.open(path3, os.O_CREAT)                                       # STEP 38
stat0 = os0.lstat(path3)                                                # STEP 39
os0.link(path1,path1)                                                   # STEP 40
str0 += 'a'                                                             # STEP 41
str0 += 'l'                                                             # STEP 42
stat1 = os0.fstat(fd0)                                                  # STEP 43
str0 += 'i'                                                             # STEP 44
str4 += 'w'                                                             # STEP 45
os0.remove(path1)                                                       # STEP 46
str1 = ""                                                               # STEP 47
path3 += "/" + component2                                               # STEP 48
str0 += 'n'                                                             # STEP 49
component2 = "omega"                                                    # STEP 50
str0 += 's'                                                             # STEP 51
str4 += " "                                                             # STEP 52
os0.path.getsize(path1)                                                 # STEP 53
str0 += 'i'                                                             # STEP 54
os0.makedirs(path3)                                                     # STEP 55
str4 += 'x'                                                             # STEP 56
result = os0.path.isdir(path3)                                          # STEP 57
str1 += 'k'                                                             # STEP 58
str0 += 'q'                                                             # STEP 59
str4 += 'c'                                                             # STEP 60
str1 = ""                                                               # STEP 61
result = os0.path.isfile(path1)                                         # STEP 62
str4 += 'o'                                                             # STEP 63
bytes1 += 1                                                             # STEP 64
os0.link(path1,path3)                                                   # STEP 65
stat4 = os0.lstat(path3)                                                # STEP 66
str1 += 'j'                                                             # STEP 67
str1 += 'w'                                                             # STEP 68
str0 = ""                                                               # STEP 69
str0 += 'v'                                                             # STEP 70
str0 += 'o'                                                             # STEP 71
str1 += 'n'                                                             # STEP 72
stat4 = os0.stat(path3)                                                 # STEP 73
os0.link(path3,path3)                                                   # STEP 74
os0.path.getsize(path1)                                                 # STEP 75
str4 += 'g'                                                             # STEP 76
result = os0.path.isfile(path1)                                         # STEP 77
str1 += 'n'                                                             # STEP 78
stat2 = os0.stat(path3)                                                 # STEP 79
str1 += 'z'                                                             # STEP 80
result = stat1.st_size                                                  # STEP 81
path3 += "/" + component1                                               # STEP 82
os0.close(fd0)                                                          # STEP 83
str1 += 'n'                                                             # STEP 84
stat3 = os0.lstat(path1)                                                # STEP 85
component1 = "delta"                                                    # STEP 86
os0.symlink(path1,path1)                                                # STEP 87
os0.link(path1,path1)                                                   # STEP 88
fd0 = os0.open(path1, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)            # STEP 89
str3 = ""                                                               # STEP 90
os0.write(fd0,str0)                                                     # STEP 91
str4 += 'w'                                                             # STEP 92
str1 += 'b'                                                             # STEP 93
str3 += 'z'                                                             # STEP 94
stat2 = os0.stat(path1)                                                 # STEP 95
os0.path.getsize(path1)                                                 # STEP 96
str3 = ""                                                               # STEP 97
result = os0.path.dirname(path3)                                        # STEP 98
opener0 = newFakeOpener(os0)                                            # STEP 99
os0.removedirs(path3)                                                  # STEP 100
str1 += 's'                                                            # STEP 101
stat3 = os0.stat(path1)                                                # STEP 102
os0.link(path1,path1)                                                  # STEP 103
path2 = "/Volumes/ramdisk/test"                                        # STEP 104
str0 += 'n'                                                            # STEP 105
path3 = "/Volumes/ramdisk/test"                                        # STEP 106
str1 += 'h'                                                            # STEP 107
path2 += "/" + component4                                              # STEP 108
component4 = "epsilon"                                                 # STEP 109
str0 += 'b'                                                            # STEP 110
stat4 = os0.fstat(fd0)                                                 # STEP 111
str1 += 'u'                                                            # STEP 112
str4 += 'q'                                                            # STEP 113
bytes0 += 1                                                            # STEP 114
str3 += 'j'                                                            # STEP 115
str1 += 'f'                                                            # STEP 116
str0 += 'z'                                                            # STEP 117
str4 += 'd'                                                            # STEP 118
str1 += 'h'                                                            # STEP 119
str1 += 'k'                                                            # STEP 120
result = sorted(os0.listdir(path1))                                    # STEP 121
stat2 = os0.fstat(fd0)                                                 # STEP 122
str3 += 't'                                                            # STEP 123
str0 += 'i'                                                            # STEP 124
stat2 = os0.lstat(path1)                                               # STEP 125
file0 = opener0(path1)                                                 # STEP 126
str0 += 'n'                                                            # STEP 127
str3 += 'v'                                                            # STEP 128
result = os0.path.lexists(path1)                                       # STEP 129
result = os0.read(fd0,bytes0)                                          # STEP 130
path1 += "/" + component1                                              # STEP 131
os0.mkdir(path2)                                                       # STEP 132
str4 += 'z'                                                            # STEP 133
os0.mkdir(path3)                                                       # STEP 134
os0.link(path1,path3)                                                  # STEP 135
str3 += 'h'                                                            # STEP 136
str0 += 'q'                                                            # STEP 137
str4 += 'g'                                                            # STEP 138
str3 += 'w'                                                            # STEP 139
str1 += 't'                                                            # STEP 140
stat3 = os0.lstat(path2)                                               # STEP 141
result = os0.path.isdir(path2)                                         # STEP 142
str0 = ""                                                              # STEP 143
str0 += 'w'                                                            # STEP 144
str0 += 'p'                                                            # STEP 145
component1 = "omega"                                                   # STEP 146
str0 += 'p'                                                            # STEP 147
path1 += "/" + component4                                              # STEP 148
result = os0.readlink(path3)                                           # STEP 149
path1 += "/" + component2                                              # STEP 150
str4 += 'c'                                                            # STEP 151
component2 = "delta"                                                   # STEP 152
os0.link(path1,path1)                                                  # STEP 153
os0.path.getsize(path2)                                                # STEP 154
component4 = "gamma"                                                   # STEP 155
str4 += 'h'                                                            # STEP 156
str1 += 'i'                                                            # STEP 157
str3 += 's'                                                            # STEP 158
result = os0.readlink(path1)                                           # STEP 159
str0 += 'z'                                                            # STEP 160
path1 = "/Volumes/ramdisk/test"                                        # STEP 161
str4 += 'o'                                                            # STEP 162
file0 = opener0(path2,'r')                                             # STEP 163
str3 += 's'                                                            # STEP 164
result = stat3.st_size                                                 # STEP 165
stat1 = os0.stat(path2)                                                # STEP 166
result = stat0.st_size                                                 # STEP 167
str3 = ""                                                              # STEP 168
os0.symlink(path2,path1)                                               # STEP 169
str3 += 'u'                                                            # STEP 170
str1 += 'v'                                                            # STEP 171
result = os0.path.dirname(path2)                                       # STEP 172
os0.symlink(path2,path1)                                               # STEP 173
os0.rename(path2,path3)                                                # STEP 174
str0 += 'b'                                                            # STEP 175
str4 += 'r'                                                            # STEP 176
str3 = ""                                                              # STEP 177
os0.symlink(path1,path3)                                               # STEP 178
str3 += 'r'                                                            # STEP 179
str1 += 'f'                                                            # STEP 180
str3 += 't'                                                            # STEP 181
os0.close(fd0)                                                         # STEP 182
str4 += 'w'                                                            # STEP 183
result = os0.path.lexists(path2)                                       # STEP 184
str3 += 'p'                                                            # STEP 185
stat0 = os0.stat(path2)                                                # STEP 186
result = os0.path.abspath(path2)                                       # STEP 187
str4 += 'p'                                                            # STEP 188
str3 += 'k'                                                            # STEP 189
os0.link(path1,path3)                                                  # STEP 190
str1 += 'v'                                                            # STEP 191
str4 = ""                                                              # STEP 192
str4 += 'l'                                                            # STEP 193
str1 += 'i'                                                            # STEP 194
str0 += 'p'                                                            # STEP 195
str1 += 'z'                                                            # STEP 196
str3 += 'n'                                                            # STEP 197
result = os0.path.dirname(path1)                                       # STEP 198
str0 += 's'                                                            # STEP 199
path2 += "/" + component4                                              # STEP 200
str1 += 'o'                                                            # STEP 201
os0.removedirs(path3)                                                  # STEP 202
os0.symlink(path1,path3)                                               # STEP 203
str3 += 'w'                                                            # STEP 204
component4 = "epsilon"                                                 # STEP 205
os0.symlink(path3,path1)                                               # STEP 206
str0 += 'z'                                                            # STEP 207
str0 += 'h'                                                            # STEP 208
stat4 = os0.lstat(path2)                                               # STEP 209
result = os0.readlink(path3)                                           # STEP 210
path4 = "/Volumes/ramdisk/test"                                        # STEP 211
file0 = opener0(path2)                                                 # STEP 212
path4 += "/" + component3                                              # STEP 213
str1 += 'p'                                                            # STEP 214
os0.mkdir(path3)                                                       # STEP 215
str1 += 'x'                                                            # STEP 216
path2 += "/" + component2                                              # STEP 217
result = stat2.st_size                                                 # STEP 218
str3 += 'g'                                                            # STEP 219
bytes1 += 1                                                            # STEP 220
str3 += 'q'                                                            # STEP 221
component3 = "gamma"                                                   # STEP 222
result = os0.path.isdir(path4)                                         # STEP 223
str4 = ""                                                              # STEP 224
bytes2 = 0                                                             # STEP 225
result = os0.path.dirname(path2)                                       # STEP 226
result = os0.path.lexists(path1)                                       # STEP 227
result = os0.path.exists(path1)                                        # STEP 228
result = os0.path.isdir(path3)                                         # STEP 229
str0 += 'u'                                                            # STEP 230
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY)                        # STEP 231
str1 += 'e'                                                            # STEP 232
component2 = "gamma"                                                   # STEP 233
str4 += 'e'                                                            # STEP 234
str4 += 'n'                                                            # STEP 235
os0.link(path2,path3)                                                  # STEP 236
result = os0.readlink(path1)                                           # STEP 237
os0.removedirs(path1)                                                  # STEP 238
result = os0.path.isabs(path3)                                         # STEP 239
result = stat3.st_nlink                                                # STEP 240
result = os0.readlink(path4)                                           # STEP 241
str3 += 'e'                                                            # STEP 242
result = os0.path.abspath(path2)                                       # STEP 243
result = sorted(os0.listdir(path2))                                    # STEP 244
str4 += 'c'                                                            # STEP 245
os0.close(fd0)                                                         # STEP 246
os0.link(path4,path3)                                                  # STEP 247
str4 += 'j'                                                            # STEP 248
os0.link(path4,path4)                                                  # STEP 249
os0.rename(path4,path1)                                                # STEP 250
path2 += "/" + component3                                              # STEP 251
str4 += 'o'                                                            # STEP 252
os0.link(path1,path3)                                                  # STEP 253
fd0 = os0.open(path2, os.O_CREAT | os.O_WRONLY | os.O_TRUNC)           # STEP 254
os0.remove(path3)                                                      # STEP 255
str0 += 'g'                                                            # STEP 256
os0.symlink(path4,path2)                                               # STEP 257
str4 += 'g'                                                            # STEP 258
path1 += "/" + component4                                              # STEP 259
str4 += 't'                                                            # STEP 260
str3 += 'j'                                                            # STEP 261
str3 += 'p'                                                            # STEP 262
str1 += 'g'                                                            # STEP 263
str1 += 'r'                                                            # STEP 264
str1 += 'e'                                                            # STEP 265
str1 += 'o'                                                            # STEP 266
str4 += 'v'                                                            # STEP 267
result = os0.read(fd0,bytes2)                                          # STEP 268
result = os0.readlink(path2)                                           # STEP 269
stat2 = os0.fstat(fd0)                                                 # STEP 270
os0.rmdir(path2)                                                       # STEP 271
str4 += 'n'                                                            # STEP 272
stat4 = os0.lstat(path4)                                               # STEP 273
str4 += 'r'                                                            # STEP 274
str1 += 'u'                                                            # STEP 275
result = sorted(os0.listdir(path2))                                    # STEP 276
str1 += 'l'                                                            # STEP 277
result = os0.path.exists(path1)                                        # STEP 278
component4 = "e"                                                       # STEP 279
str1 += 'q'                                                            # STEP 280
os0.close(fd0)                                                         # STEP 281
os0.symlink(path4,path1)                                               # STEP 282
str0 += 'l'                                                            # STEP 283
file0 = opener0(path3,'r')                                             # STEP 284
str1 += 'j'                                                            # STEP 285
os0.remove(path4)                                                      # STEP 286
file0 = opener0(path3)                                                 # STEP 287
str3 += 'f'                                                            # STEP 288
os0.link(path4,path4)                                                  # STEP 289
component3 = "alpha"                                                   # STEP 290
os0.rmdir(path1)                                                       # STEP 291
result = sorted(os0.listdir(path3))                                    # STEP 292
str0 += 'c'                                                            # STEP 293
os0.symlink(path1,path2)                                               # STEP 294
result = stat2.st_nlink                                                # STEP 295
path1 += "/" + component0                                              # STEP 296
fd0 = os0.open(path4, os.O_RDONLY)                                     # STEP 297
str0 += 's'                                                            # STEP 298
result = os0.path.dirname(path4)                                       # STEP 299
file0 = opener0(path3,'w')                                             # STEP 300
str4 += 'p'                                                            # STEP 301
component0 = "d"                                                       # STEP 302
result = os0.readlink(path2)                                           # STEP 303
str1 += 'w'                                                            # STEP 304
result = os0.path.exists(path3)                                        # STEP 305
path3 += "/" + component4                                              # STEP 306
os0.write(fd0,str0)                                                    # STEP 307
os0.write(fd0,str3)                                                    # STEP 308
component4 = "delta"                                                   # STEP 309
result = os0.readlink(path2)                                           # STEP 310
str3 += 'f'                                                            # STEP 311
str0 = ""                                                              # STEP 312
os0.path.getsize(path2)                                                # STEP 313
str0 += 'q'                                                            # STEP 314
stat2 = os0.fstat(fd0)                                                 # STEP 315
bytes3 = 0                                                             # STEP 316
os0.makedirs(path4)                                                    # STEP 317
str3 += 'h'                                                            # STEP 318
result = os0.path.isabs(path1)                                         # STEP 319
result = os0.read(fd0,bytes2)                                          # STEP 320
str1 += 'q'                                                            # STEP 321
file0 = opener0(path2,'r')                                             # STEP 322
str1 += 'l'                                                            # STEP 323
result = os0.read(fd0,bytes2)                                          # STEP 324
path2 += "/" + component4                                              # STEP 325
str3 += 'f'                                                            # STEP 326
str3 += 'b'                                                            # STEP 327
str1 += 's'                                                            # STEP 328
component4 = "alpha"                                                   # STEP 329
str1 += 'p'                                                            # STEP 330
result = os0.path.lexists(path1)                                       # STEP 331
str3 += 'x'                                                            # STEP 332
result = stat3.st_nlink                                                # STEP 333
file0 = opener0(path1,'a')                                             # STEP 334
str0 += 'g'                                                            # STEP 335
path2 += "/" + component3                                              # STEP 336
str1 += 'h'                                                            # STEP 337
component3 = "beta"                                                    # STEP 338
path2 += "/" + component0                                              # STEP 339
str0 += 'h'                                                            # STEP 340
component0 = "c"                                                       # STEP 341
result = os0.path.dirname(path4)                                       # STEP 342
bytes2 = 0                                                             # STEP 343
stat4 = os0.lstat(path2)                                               # STEP 344
os0.rmdir(path3)                                                       # STEP 345
result = stat2.st_size                                                 # STEP 346
result = stat3.st_size                                                 # STEP 347
str4 += 'h'                                                            # STEP 348
str3 += 'a'                                                            # STEP 349
stat3 = os0.lstat(path2)                                               # STEP 350
os0.link(path3,path4)                                                  # STEP 351
str1 += 'g'                                                            # STEP 352
result = os0.path.isdir(path4)                                         # STEP 353
result = os0.path.isdir(path1)                                         # STEP 354
os0.rmdir(path4)                                                       # STEP 355
str0 += 'm'                                                            # STEP 356
result = file0.readline(bytes0)                                        # STEP 357
result = os0.path.dirname(path2)                                       # STEP 358
str3 += 'w'                                                            # STEP 359
os0.makedirs(path1)                                                    # STEP 360
result = os0.path.isabs(path2)                                         # STEP 361
str3 += 'w'                                                            # STEP 362
os0.remove(path4)                                                      # STEP 363
str3 += 'q'                                                            # STEP 364
str4 += 'v'                                                            # STEP 365
str4 += 'w'                                                            # STEP 366
str1 += 'j'                                                            # STEP 367
file0.write(str1)                                                      # STEP 368
str3 += 'r'                                                            # STEP 369
str3 += 'm'                                                            # STEP 370
os0.removedirs(path1)                                                  # STEP 371
stat4 = os0.fstat(fd0)                                                 # STEP 372
result = os0.read(fd0,bytes0)                                          # STEP 373
os0.rename(path4,path1)                                                # STEP 374
result = os0.path.isdir(path4)                                         # STEP 375
str4 += 'h'                                                            # STEP 376
str0 += 'p'                                                            # STEP 377
result = os0.path.lexists(path4)                                       # STEP 378
os0.link(path3,path4)                                                  # STEP 379
os0.makedirs(path2)                                                    # STEP 380
str0 += 'n'                                                            # STEP 381
path1 = "/Volumes/ramdisk/test"                                        # STEP 382
os0.link(path4,path2)                                                  # STEP 383
bytes0 = 0                                                             # STEP 384
os0.rmdir(path2)                                                       # STEP 385
str1 += " "                                                            # STEP 386
str0 += 'i'                                                            # STEP 387
os0.symlink(path1,path4)                                               # STEP 388
os0.link(path4,path4)                                                  # STEP 389
str0 += 'i'                                                            # STEP 390
str2 = ""                                                              # STEP 391
os0.write(fd0,str1)                                                    # STEP 392
str4 += 'k'                                                            # STEP 393
result = os0.readlink(path1)                                           # STEP 394
os0.close(fd0)                                                         # STEP 395
result = os0.path.lexists(path2)                                       # STEP 396
file0.seek(bytes1)                                                     # STEP 397
result = os0.path.lexists(path4)                                       # STEP 398
str0 += " "                                                            # STEP 399
os0.symlink(path1,path2)                                               # STEP 400
str4 += 'f'                                                            # STEP 401
result = os0.path.lexists(path4)                                       # STEP 402
str4 += 'e'                                                            # STEP 403
os0.removedirs(path2)                                                  # STEP 404
str3 += 'o'                                                            # STEP 405
result = os0.path.abspath(path3)                                       # STEP 406
str1 += 'l'                                                            # STEP 407
os0.write(fd0,str1)                                                    # STEP 408
stat2 = os0.stat(path3)                                                # STEP 409
result = os0.path.islink(path2)                                        # STEP 410
os0.symlink(path1,path1)                                               # STEP 411
str4 += 'n'                                                            # STEP 412
path3 += "/" + component1                                              # STEP 413
os0.mkdir(path2)                                                       # STEP 414
os0.link(path2,path4)                                                  # STEP 415
path4 += "/" + component4                                              # STEP 416
result = os0.path.exists(path3)                                        # STEP 417
component1 = "gamma"                                                   # STEP 418
str3 += 'u'                                                            # STEP 419
component4 = "h"                                                       # STEP 420
result = stat3.st_size                                                 # STEP 421
os0.symlink(path2,path2)                                               # STEP 422
str1 += 'n'                                                            # STEP 423
result = os0.path.isabs(path1)                                         # STEP 424
str3 += 'h'                                                            # STEP 425
result = os0.path.isfile(path3)                                        # STEP 426
fd0 = os0.open(path2, os.O_RDONLY)                                     # STEP 427
os0.write(fd0,str4)                                                    # STEP 428
os0.link(path4,path1)                                                  # STEP 429
os0.link(path3,path1)                                                  # STEP 430
str2 += 'i'                                                            # STEP 431
file0.seek(bytes3)                                                     # STEP 432
str2 += 'k'                                                            # STEP 433
str4 += 'j'                                                            # STEP 434
os0.remove(path2)                                                      # STEP 435
str3 += 'l'                                                            # STEP 436
str1 += 'z'                                                            # STEP 437
path1 += "/" + component4                                              # STEP 438
result = stat0.st_size                                                 # STEP 439
str3 += 'l'                                                            # STEP 440
result = os0.path.isdir(path2)                                         # STEP 441
result = file0.read(bytes0)                                            # STEP 442
result = sorted(os0.listdir(path2))                                    # STEP 443
os0.makedirs(path1)                                                    # STEP 444
str0 += 'r'                                                            # STEP 445
str0 += 'k'                                                            # STEP 446
str2 += 'i'                                                            # STEP 447
result = stat2.st_nlink                                                # STEP 448
result = stat4.st_nlink                                                # STEP 449
str3 += 'y'                                                            # STEP 450
os0.write(fd0,str3)                                                    # STEP 451
str1 += 'y'                                                            # STEP 452
stat0 = os0.stat(path1)                                                # STEP 453
os0.link(path4,path2)                                                  # STEP 454
str0 += 'c'                                                            # STEP 455
stat3 = os0.stat(path4)                                                # STEP 456
str2 += 'd'                                                            # STEP 457
str0 += 'b'                                                            # STEP 458
str2 += 'n'                                                            # STEP 459
result = stat4.st_size                                                 # STEP 460
ERROR: (<type 'exceptions.AssertionError'>, AssertionError(' (40) == (0) ',), <traceback object at 0x107285dd0>)
TRACEBACK:
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 38007, in safely
    act[2]()
  File "/Users/alex/tstl/examples/pyfakefs/sut.py", line 21991, in act461
    try: assert result == result_REF, " (%s) == (%s) " % (result, result_REF)
1154 BRANCHES COVERED
884 STATEMENTS COVERED
